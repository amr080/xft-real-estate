"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2415],{71075:function(e,t,a){a.d(t,{a:function(){return n},s:function(){return r}});var l=a(53765);let n=new l.Z(10),r=new l.Z(50)},99543:function(e,t,a){a.d(t,{B3:function(){return l},v6:function(){return n}});let l="Represents your Profit & Loss reflective of only price movements on all of your positions - excludes the impact of funding",n="Represents the portion of your Profit & Loss exclusively due to funding"},77097:function(e,t,a){a.d(t,{z:function(){return l}});let l="2"},68459:function(e,t,a){a.d(t,{tL:function(){return o},E3:function(){return i},A8:function(){return c}});var l=a(52676),n=a(47433),r=a(75271);function s(e,t){switch(t.type){case"setActiveField":return{...e,activeField:t.payload};case"setSide":return{...e,side:t.payload};case"setMaxSlippage":return(0,n.sn)(t.payload),{...e,maxSlippage:t.payload};case"setSize":return{...e,size:t.payload.size};case"setNotional":return{...e,notional:t.payload.notional};case"setLeverage":return{...e,leverage:t.payload.leverage};case"setSignature":return{...e,signature:t.payload};case"reset":return i;default:throw Error("Unhandled action type: ".concat(t.type))}}let i={activeField:void 0,side:"long",maxSlippage:(0,n.O4)(),size:void 0,notional:void 0,leverage:void 0,signature:void 0},d=(0,r.createContext)({state:i,dispatch:()=>{}});function o(e){let{children:t}=e,[a,n]=(0,r.useReducer)(s,i);return(0,l.jsx)(d.Provider,{value:{state:a,dispatch:n},children:t})}function c(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useNewPosition must be used within a NewPositionProvider");return e}},60057:function(e,t,a){a.d(t,{T:function(){return o},y:function(){return c}});var l=a(52676),n=a(78688),r=a(71177),s=a(80003),i=a(75271);let d=(0,i.createContext)({route:"new_position",setRoute:()=>{}});function o(e){let{children:t}=e,{publicKey:a}=(0,s.O)(),{data:o}=(0,n.K)(),{data:c,isFetching:u}=(0,r.A)(null==o?void 0:o.id),[m,x]=(0,i.useState)("init");return(0,i.useEffect)(()=>{if(!u&&null!==a){let e=null==c?void 0:c.length;void 0!==e&&e>0&&"init"===m?x("view_positions"):"init"===m&&x("new_position")}},[c,u,a,m]),(0,l.jsx)(d.Provider,{value:{route:m,setRoute:x},children:t})}function c(){let e=(0,i.useContext)(d);if(void 0===e)throw Error("useTradeFlowRoute must be used within a TradeFlowRouteProvider");return e}},52415:function(e,t,a){a.d(t,{l:function(){return eQ}});var l=a(52676),n=a(19593),r=a(28278),s=a(49238),i=a(62654),d=a(99543),o=a(54801),c=a(40639),u=a(1151),m=a(2802),x=a(83052),f=a(23843),h=a(36844);function p(){var e,t,a,n,s,i;let{account:p}=(0,r.u)();return(0,l.jsxs)(h.f,{className:"bg-tranparent",children:[(0,l.jsx)(m.k,{tooltipContent:"Total notional value on all over your open positions",className:"text-[11px]",children:"TOTAL OPEN INTEREST"}),(0,l.jsxs)(u.a,{category:"heading",tag:"h1",mode:"small",children:["$",(0,o._)(null==p?void 0:p.openInterest.notional)]}),(0,l.jsx)("div",{className:"mb-[69px]",children:(0,l.jsx)(f.Q,{size:"default",performance:{notional:null!==(e=null==p?void 0:p.pnlInfo.totalPnl.value)&&void 0!==e?e:"0",percent:null!==(t=null==p?void 0:p.pnlInfo.totalPnl.percentChange)&&void 0!==t?t:"0"}})}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-default",children:[(0,l.jsx)(m.k,{tooltipContent:d.B3,children:"Price P&L"}),(0,l.jsx)(f.Q,{size:"small",performance:{notional:null!==(a=null==p?void 0:p.pnlInfo.priceComponent.value)&&void 0!==a?a:"0",percent:null!==(n=null==p?void 0:p.pnlInfo.priceComponent.percentChange)&&void 0!==n?n:"0"}})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-default",children:[(0,l.jsx)(m.k,{tooltipContent:d.v6,children:"Funding P&L"}),(0,l.jsx)(f.Q,{size:"small",performance:{notional:null!==(s=null==p?void 0:p.pnlInfo.accruedFunding.value)&&void 0!==s?s:"0",percent:null!==(i=null==p?void 0:p.pnlInfo.accruedFunding.percentChange)&&void 0!==i?i:"0"}})]}),(0,l.jsx)(x.d,{className:"mb-default"}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-default",children:[(0,l.jsx)(m.k,{tooltipContent:"Represents the total number of square feet represented across your positions",children:"Total Size"}),(0,l.jsx)(u.a,{category:"number",children:null==p?void 0:p.openInterest.size})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsx)(m.k,{tooltipContent:"Represents the difference in notional value between your long and short positions",children:"Total Position Spread"}),(0,l.jsxs)(u.a,{category:"number",mode:"default",className:"text-neutral-label-default",children:[(0,l.jsxs)("span",{className:"text-trend-uptrend-default",children:[(0,c.J)(null==p?void 0:p.openInterestDistribution.long.percent),"%"]})," ","/"," ",(0,l.jsxs)("span",{className:"text-trend-downtrend-default text-[16px]",children:[(0,c.J)(null==p?void 0:p.openInterestDistribution.short.percent),"%"]})]})]})]})}var j=a(48238),g=a(45603),v=a(80003),b=a(5968),y=a(75271),w=a(84880),N=a(89917),k=a(30503),I=a(45823),C=a(96655),A=a.n(C),S=a(45924),P=a(7810),F=a.n(P),T=a(75065),D=a(77097),z=a(67376),R=a(92323),M=a(67997),E=a(46896),W=a(91671),q=a(50317),L=a(30266),_=a(86430),J=a(84263),Z=a(53765);let O=e=>{var t;let{data:a,isComplete:n=!1}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between w-full mb-default px-default",children:[(0,l.jsx)(u.a,{mode:"small",category:"paragraph",children:n?"Fill Price":"Est. Fill Price"}),(0,l.jsxs)(u.a,{mode:"small",category:"label",children:["$",(0,o._)(a.fillPrice)]})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full border-b mb-default pb-default px-default border-neutral-border-surface-default",children:[(0,l.jsx)(u.a,{className:"text-[14px]",category:"paragraph",children:n?"Slippage":"Max Slippage"}),(0,l.jsxs)(u.a,{className:"text-[14px]",category:"label",children:[(0,c.J)(a.maxSlippage),"%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full mb-default px-default",children:[(0,l.jsx)(m.k,{className:"text-white",children:"Close Amount"}),(0,l.jsxs)(u.a,{category:"label",children:["$",(0,o._)(a.closeAmount)]})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full mb-default px-default",children:[(0,l.jsx)(m.k,{children:"Size"}),(0,l.jsx)(u.a,{category:"label",children:a.size})]}),(0,l.jsxs)("div",{className:"flex justify-between px-default",children:[(0,l.jsx)("div",{className:"flex items-center justify-start mb-x-small",children:(0,l.jsx)(u.a,{mode:"small",category:"paragraph",children:n?"Settlement P&L":"Est. Settlement P&L"})}),(0,l.jsx)(f.Q,{size:"small",performance:a.estSettlementPL})]}),(0,l.jsxs)("div",{className:"flex justify-between px-default mb-default",children:[(0,l.jsx)("div",{className:"flex items-center justify-start",children:(0,l.jsx)(m.k,{children:"Trading Fee"})}),(0,l.jsxs)(u.a,{category:"label",mode:"small",className:"text-trend-downtrend-default",children:["-$",new Z.Z(null!==(t=a.tradingFee.notional)&&void 0!==t?t:0).toDP(2).toString()]})]})]})},B=e=>{let{closePosition:t,closePositionData:a,fetchingQuote:n}=e,{hideModal:r}=(0,s.dd)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start border-b mb-medium p-default border-neutral-border-surface-default",children:[(0,l.jsx)("div",{onClick:r,className:"cursor-pointer mb-default",children:(0,l.jsx)(W.J,{name:"xmark-large",prefix:"sharp-solid",color:"default",size:"medium"})}),(0,l.jsx)(u.a,{category:"label",className:"text-[20px]",children:"Close Position"}),(0,l.jsx)(u.a,{category:"paragraph",tag:"p",children:"Close your entire position."})]}),(0,l.jsx)(q.F,{isLoading:n,children:(0,l.jsx)(O,{data:a.data})}),(0,l.jsx)("div",{className:"px-default",children:(0,l.jsxs)(g.z,{intent:"danger",className:"mb-default",onClick:()=>t(),children:["Close ",(0,_.k)(a.data.positionSide)," Position"]})})]})},$=e=>{let{closePositionData:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start border-b mb-default p-default border-neutral-border-surface-default",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(L.$,{size:"small"}),(0,l.jsx)(u.a,{category:"label",className:"text-[20px] ml-x-small",children:"Order Processing"})]}),(0,l.jsx)(u.a,{category:"paragraph",tag:"p",children:"Closing your entire position."})]}),(0,l.jsx)(O,{data:t.data})]})},Q=e=>{let{closePositionData:t,signature:a}=e,{hideModal:n}=(0,s.dd)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start border-b mb-medium border-neutral-border-surface-default",children:[(0,l.jsxs)("div",{className:"p-default",children:[(0,l.jsx)("div",{onClick:n,className:"cursor-pointer mb-default",children:(0,l.jsx)(W.J,{name:"xmark-large",prefix:"sharp-solid",color:"default",size:"medium"})}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(W.J,{name:"check",prefix:"sharp-solid",color:"success"}),(0,l.jsx)(u.a,{category:"label",className:"text-[20px] ml-x-small",children:"Order Confirmed"})]})]}),(0,l.jsx)(z.s,{signature:a}),(0,l.jsx)("div",{className:"text-white p-default",children:"Savings Account #1"})]}),(0,l.jsx)(O,{data:t.data,isComplete:!0})]})};function K(e){var t,a,n,r;let{position:s}=e,i=(0,J.NL)(),[d,o]=(0,y.useState)(""),{mutate:c,isLoading:u,isSuccess:m}=(0,E.n)({onSuccess:e=>{o(e),i.invalidateQueries([R.yI])}}),x="long"===s.side?"short":"long",f=D.z,{data:h,isLoading:p}=(0,M._)({inputKind:"percentClose",input:"100",marketId:s.marketId,maxSlippage:f}),j={data:{fillPrice:null!==(t=null==h?void 0:h.fillPrice)&&void 0!==t?t:"0",maxSlippage:f,size:null!==(a=null==h?void 0:h.openInterestDelta.size)&&void 0!==a?a:"0",closeAmount:null!==(n=null==h?void 0:h.openInterestDelta.notional)&&void 0!==n?n:"0",positionSide:s.side,estSettlementPL:{notional:s.pnlInfo.totalPnl.value,percent:s.pnlInfo.totalPnl.percentChange},tradingFee:{notional:null!==(r=null==h?void 0:h.tradeFee)&&void 0!==r?r:"0"}}};return u?(0,l.jsx)($,{closePositionData:j}):m?(0,l.jsx)(Q,{closePositionData:j,signature:d}):(0,l.jsx)(B,{closePosition:async()=>{c({sizeDelta:s.openInterest.size,side:x,fullClose:!0,slippageTolerance:f,marketId:s.marketId})},closePositionData:j,fetchingQuote:p})}function U(e){return(0,l.jsx)("div",{"data-cy":"close-position-modal",children:(0,l.jsx)(K,{...e})})}var V=a(85047),H=a(82330);function X(e){let{data:t}=(0,H.e)(t=>t.find(t=>t.id===e));return{market:t}}var G=a(12044),Y=a(78433),ee=a(44878),et=a(71903),ea=a(70023),el=a(86712),en=a(5788),er=a.n(en),es=a(90659),ei=a(29524);function ed(e){let{metadataById:t,position:a,isTradable:n,closePositionOnClick:r,modifyPositionOnClick:s}=e;return(0,l.jsxs)("div",{className:"text-start",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-small px-default pb-default",children:[(0,l.jsx)(et.C,{isLive:n,name:t[a.marketId].name,isNew:t[a.marketId].isNew,state:t[a.marketId].state}),(0,l.jsx)(ec,{position:a})]}),(0,l.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default"}),(0,l.jsxs)("div",{className:"p-default",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-small mb-default",children:[(0,l.jsx)("div",{children:(0,l.jsx)(eo,{position:a})}),(0,l.jsx)("div",{children:(0,l.jsx)(eu,{position:a})}),(0,l.jsx)("div",{children:(0,l.jsx)(em,{position:a})})]}),(0,l.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default mb-default"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-small",children:[(0,l.jsx)(g.z,{leftIconName:"circle-minus",intent:"danger",onClick:r,children:"Close Position"}),(0,l.jsx)(g.z,{leftIconName:"slider",intent:"primary",onClick:s,children:"Modify Position"})]})]})]})}let eo=e=>{var t;let{position:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(u.a,{category:"label",mode:"small",className:(0,S.Z)({"text-trend-uptrend-default":(null==a?void 0:a.side)==="long","text-trend-downtrend-default":(null==a?void 0:a.side)==="short"}),children:(0,_.k)(null==a?void 0:a.side)}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(ea.u,{content:'Trades are measured in "square feet," functioning similarly to trading a single stock, where one "square foot" represents a unit of trade and not an actual piece of property.',noUnderline:!0,children:(0,l.jsx)(W.J,{name:"ruler-combined",prefix:"sharp-solid",color:"default",size:"x-small",className:"mr-xx-small"})}),(0,l.jsx)(u.a,{category:"number",mode:"small",children:null==a?void 0:null===(t=a.openInterest)||void 0===t?void 0:t.size})]})]})},ec=e=>{var t,a,n,r,s,i,d;let{position:o}=e;return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)(u.a,{category:"number",mode:"small",className:"flex items-center justify-end lg:justify-start",children:["$",(0,Y.a)(null!==(s=null==o?void 0:o.openInterest.notional)&&void 0!==s?s:0)]}),(0,l.jsx)(f.Q,{size:"small",performance:{notional:null!==(i=null==o?void 0:null===(a=o.pnlInfo)||void 0===a?void 0:null===(t=a.totalPnl)||void 0===t?void 0:t.value)&&void 0!==i?i:"0",percent:null!==(d=null==o?void 0:null===(r=o.pnlInfo)||void 0===r?void 0:null===(n=r.totalPnl)||void 0===n?void 0:n.percentChange)&&void 0!==d?d:"0"},className:"flex justify-end lg:justify-start"})]})},eu=e=>{var t,a;let{position:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.a,{category:"paragraph",mode:"small",tag:"p",children:"Margin Requirements"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)(u.a,{category:"number",mode:"small",children:[(0,c.J)(null!==(t=null==n?void 0:n.initialMarginRatio)&&void 0!==t?t:2),"%"]}),(0,l.jsx)(V.o,{}),(0,l.jsxs)(u.a,{category:"number",mode:"small",children:[(0,c.J)(null!==(a=null==n?void 0:n.maintenanceMarginRatio)&&void 0!==a?a:2),"%"]})]})]})},em=e=>{var t;let{position:a}=e,{data:n}=(0,H.K)();return(0,l.jsxs)("div",{children:[(0,l.jsx)(u.a,{category:"paragraph",mode:"small",tag:"p",children:"Market 1D Funding"}),(0,l.jsxs)(u.a,{category:"label",mode:"small",className:"flex items-center",children:[(0,c.J)(null!==(t=n&&n[a.marketId]&&n[a.marketId].fundingRate)&&void 0!==t?t:0,4),"%"]})]})},ex=e=>{let{position:t,className:a}=e,n=(0,es.useRouter)(),{data:r}=(0,G.F)(),{setModalContent:i,visible:d,showModal:o}=(0,s.dd)(),{market:c}=X(t.marketId);return(null==r?void 0:r[t.marketId])?(0,l.jsxs)("div",{className:(0,ei.m)("flex items-center justify-end",a),children:[T.l?(0,l.jsx)(W.J,{name:"diamond",prefix:"sharp-solid",color:"default",size:"x-small",className:"mr-default"}):null,(0,l.jsx)(ee.X,{options:[{text:"Position Info",icon:{name:"circle-info"},textClassName:"text-neutral-label-default ",className:"lg:hidden block",action:()=>{i({body:(0,l.jsx)(ed,{metadataById:r,isTradable:(0,el.h)(c),position:t,closePositionOnClick:()=>{i({body:(0,l.jsx)(U,{position:t}),options:{className:"fullscreen-modal-mobile",maxWidth:430,preventClose:!0}})},modifyPositionOnClick:()=>{n.push("/parcls/".concat(r[t.marketId].parclId))}}),header:{component:(0,l.jsx)(l.Fragment,{})}}),o(),console.log("pop modal!")}},{text:"Modify",icon:{name:"slider",color:"info"},textClassName:"text-signal-info-default",action:()=>{n.push("/parcls/".concat(r[t.marketId].parclId))}},{text:"Close",icon:{name:"circle-minus",color:"error"},textClassName:"text-signal-error-default",action:async()=>{i({body:(0,l.jsx)(U,{position:t}),options:{className:"fullscreen-modal-mobile",maxWidth:430,preventClose:!0}}),d||o()}}],children:(0,l.jsx)("div",{className:"rounded-lg cursor-pointer flex justify-center items-center bg-neutral-fill-surface-hover h-[31px] w-[31px]",children:(0,l.jsx)(W.J,{name:"chevron-down",prefix:"sharp-solid",color:"default"})})})]}):null},ef=()=>(0,l.jsx)("div",{className:"hidden border-r border-neutral-border-surface-default h-[10px] lg:block"}),eh=e=>{let{position:t}=e,{data:a}=(0,G.F)(),{market:n}=X(t.marketId),r=Object.keys(null!=a?a:{}).length>0;return(null==a?void 0:a[t.marketId])?(0,l.jsx)(er(),{href:"/parcls/".concat(a[t.marketId].parclId),children:(0,l.jsxs)("div",{className:"flex justify-between px-default hover:bg-neutral-fill-surface-hover",children:[(0,l.jsxs)("div",{className:"w-full lg:w-11/12 lg:flex items-center grid justify-between grid-cols-2 lg:gap-default gap-x-small py-[11.5px]",children:[(0,l.jsx)("div",{className:"w-auto lg:w-[160px]",children:r?(0,l.jsx)(et.C,{isLive:(0,el.h)(n),name:a[t.marketId].name,isNew:a[t.marketId].isNew,state:a[t.marketId].state}):(0,l.jsx)("div",{})}),(0,l.jsx)("div",{className:"flex-col hidden lg:flex w-auto lg:w-[100px]",children:(0,l.jsx)(eo,{position:t})}),(0,l.jsx)(ef,{}),(0,l.jsx)("div",{className:"flex-col hidden lg:flex w-auto lg:w-[130px]",children:(0,l.jsx)(ec,{position:t})}),(0,l.jsx)(ef,{}),(0,l.jsx)("div",{className:"hidden lg:block w-auto lg:w-[150px]",children:(0,l.jsx)(eu,{position:t})}),(0,l.jsx)(ef,{}),(0,l.jsx)("div",{className:"hidden lg:block w-auto lg:w-[150px]",children:(0,l.jsx)(em,{position:t})}),(0,l.jsx)(ex,{position:t,className:"flex lg:hidden"}),(0,l.jsx)("div",{className:"lg:hidden mt-default",children:(0,l.jsx)(eo,{position:t})}),(0,l.jsx)("div",{className:"lg:hidden mt-default",children:(0,l.jsx)(ec,{position:t})})]}),(0,l.jsx)(ex,{position:t,className:"hidden lg:flex"})]})}):null},ep=()=>{var e,t;let{account:a}=(0,r.u)();return a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.f,{noPadding:!0,className:"overflow-visible",children:[(0,l.jsx)("div",{className:(0,S.Z)("flex items-center h-[47px] w-full bg-neutral-fill-surface-background py-x-small pl-default",{"border-b border-neutral-border-surface-default":!!a.positions.length}),children:(0,l.jsxs)(u.a,{category:"label",mode:"small",children:[a.positions.length," Positions"]})}),null===(e=a.positions)||void 0===e?void 0:e.map((e,t)=>(0,l.jsx)("div",{className:(0,S.Z)({"border-b border-neutral-border-surface-default":t!==a.positions.length-1}),children:(0,l.jsx)(eh,{position:e})},a.id+"_"+e.marketId+"_"+e.side))]}),!(null===(t=a.positions)||void 0===t?void 0:t.length)&&(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-full pb-medium",children:[(0,l.jsx)(F(),{src:"/images/no_positions.svg",alt:"no positions image",className:"-mb-medium",width:0,height:0,style:{width:"100%",height:"auto",objectFit:"cover"}}),(0,l.jsx)(u.a,{category:"label",mode:"large",children:"No Active Positions"}),(0,l.jsx)(u.a,{category:"paragraph",mode:"small",children:"Open a position to continue building your portfolio"})]})]}):(0,l.jsx)(l.Fragment,{})},ej=A()(()=>a.e(9639).then(a.bind(a,59639)).then(e=>e.LiquidationsList),{loadableGenerated:{webpack:()=>[59639]},ssr:!1});function eg(e){let{account:t}=e,[a,n]=(0,y.useState)(0),{flyoutOpen:s}=(0,r.u)(),{data:i}=(0,k.n)({accountId:null==t?void 0:t.id}),d=(0,j.a)();(0,y.useEffect)(()=>{s?n(t.wasRecentlyLiquidated&&i&&i.length>0?1:0):n(0)},[t.wasRecentlyLiquidated,i,null==i?void 0:i.length,s]);let o=(0,y.useMemo)(()=>[{id:"positions",name:"Positions",children:(0,l.jsx)(ep,{})},{id:"trades",name:"Trades",children:(0,l.jsx)(N.n,{filterBy:"marginAccountId"}),onClick:()=>{d({name:"trades_history_tab_clicked",event:{route:window.location.pathname}})}},{id:"transfers",name:"Transfers",children:(0,l.jsx)(w.n,{filterBy:"marginAccountId"}),onClick:()=>{d({name:"transfer_history_tab_clicked",event:{route:window.location.pathname}})}},...i&&(null==i?void 0:i.length)>0?[{id:"liquidations",name:"Liquidations",onClick:()=>d({name:"liquidations_tab_clicked",event:{route:window.location.pathname,market_page:void 0}}),children:(0,l.jsx)("div",{className:"w-full overflow-scroll no-scrollbar",children:(0,l.jsx)(ej,{accountId:null==t?void 0:t.id})})}]:[]],[null==t?void 0:t.id,i,d]);return(0,l.jsx)(I.m,{tabs:o,selectedTabIdx:a,onTabChange:e=>n(e),intent:"default",spacing:"default"})}var ev=a(73451),eb=a(90506),ey=a(272),ew=a(54099),eN=a(66626),ek=a(51779),eI=a(19206),eC=a(91040),eA=a(82249),eS=a(80714),eP=a(78272);function eF(){let[e,t]=(0,y.useState)(""),{account:a,closeFlyout:n}=(0,r.u)(),{hideModal:i}=(0,s.dd)(),{hideDrawer:d}=(0,ev.yT)(),{mutate:o}=function(e){let{onMutate:t,onSuccess:a,onError:l,onSettled:n}=e,{publicKey:r}=(0,v.O)(),i=(0,J.NL)(),d=(0,j.a)(),{setToast:o}=(0,eb.pm)(),{setModalContent:c,hideModal:u,showModal:m}=(0,s.dd)();return(0,eS.D)(async e=>{if(!r)return(0,eC.E)("Wallet not connected");let t=await (0,eN.W)({walletAddress:r.toBase58(),accessToken:(0,ek.h)({publicKey:r})});return await t.user.removeMarginAccountId(e.accountId)},{onMutate:e=>{t&&t(e)},onSuccess:async e=>(d({name:"Remove Account Name",event:{}}),null==a||a(e),i.invalidateQueries([R.yI])),onError:e=>{if(d({name:"Remove Account Name Error",event:{}}),(0,eI.f)(e)){(0,ey.q)({setModalContent:c,hideModal:u,showModal:m}),o({type:"error",msg:"Failed to remove account name. Please verify wallet and try again."});return}null==l||l(e)},onSettled:(e,t)=>{null==n||n(e,t)}})}({}),[c,m]=(0,y.useState)(!1),{mutate:x,isLoading:f}=function(e){let{onMutate:t,onSuccess:a,onError:l}=e,{publicKey:n}=(0,v.O)(),r=(0,J.NL)(),i=(0,j.a)(),{connection:d}=(0,eA.R)(),{setToast:o}=(0,eb.pm)(),{sendAndConfirmTx:c}=(0,ew.Q)(),{setModalContent:u,hideModal:m,showModal:x}=(0,s.dd)();return(0,eS.D)(async e=>{if(!n)return(0,eC.E)("Wallet not connected");let t=await (0,eN.W)({walletAddress:n.toBase58(),accessToken:(0,ek.h)({publicKey:n})}),a=await t.user.getCloseMarginAccountTransaction({marginAccountId:e.accountId}),{signature:l}=await c(a,d);return l},{onMutate:e=>{t&&t(e)},onSuccess:async(e,t)=>(i({name:"Delete Account",event:{...t}}),null==a||a(e),o({type:"success",msg:"Account Deleted"}),r.invalidateQueries([R.yI])),onError:e=>{if(i({name:"Delete Account Error",event:{}}),(0,eI.f)(e)){(0,ey.q)({setModalContent:u,hideModal:m,showModal:x}),o({type:"error",msg:"Failed to delete account. Please verify wallet and try again."});return}o({type:"error",msg:"Failed to delete account. Please try again."}),null==l||l(e)}})}({onSuccess:()=>{(null==a?void 0:a.id)&&o({accountId:a.id}),i(),n(),d()},onError:()=>{i()}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start border-b mb-default p-default border-neutral-border-surface-default","data-cy":"delete-account-modal",children:[(0,l.jsx)(u.a,{category:"label",className:"text-[20px]",children:"Please Type Account Name"}),(0,l.jsx)(u.a,{category:"paragraph",tag:"p",className:"text-left",children:"Please type in the account name in order to delete this account."})]}),(0,l.jsxs)("div",{className:"px-default mb-default",children:[(0,l.jsx)(eP.I,{"data-cy":"delete-account-modal-input",value:e,onChange:e=>{c&&m(!1),t(e.target.value)},message:c?{text:"Enter the correct account name to delete this account.",intent:"error"}:null,className:(0,S.Z)({"mb-default":!c,"mb-medium":c})}),(0,l.jsx)(g.z,{onClick:()=>{if(a){if(e!==a.name){m(!0);return}x({accountId:a.id})}},intent:"danger",disabled:""===e||c,className:"mb-default",children:f?(0,l.jsx)("div",{className:"w-[100px]",children:(0,l.jsx)(L.$,{size:"small"})}):"Delete Account"}),(0,l.jsx)(u.a,{category:"paragraph",mode:"small",className:"italic text-start",tag:"p",children:"Transaction history for this account will be stored and accessible in your portfolio."})]})]})}var eT=a(33228),eD=a(1386),ez=a(99722);let eR=/^[a-zA-Z0-9-]{0,20}$/,eM=e=>ez.Ry().shape({newAccountName:ez.Z_().test("is-unique","Account name already exists",t=>!(null==e?void 0:e.some(e=>e.name===t)))});function eE(){let{hideModal:e}=(0,s.dd)(),{setToast:t}=(0,eb.pm)(),{account:a}=(0,r.u)(),{data:n}=(0,eT.J)(e=>e.marginAccounts),{mutate:i,isLoading:d}=function(e){let{onMutate:t,onSuccess:a,onError:l,onSettled:n}=e,{publicKey:r}=(0,v.O)(),i=(0,J.NL)(),d=(0,j.a)(),{setToast:o}=(0,eb.pm)(),{setModalContent:c,hideModal:u,showModal:m}=(0,s.dd)();return(0,eS.D)(async e=>{try{if(!r)return(0,eC.E)("Wallet not connected");let t=await (0,eN.W)({walletAddress:r.toBase58(),accessToken:(0,ek.h)({publicKey:r})});return await t.user.updateMarginAccountIds({[e.accountId]:e.name})}catch(e){if(e instanceof Error&&(0,eI.f)(e)){(0,ey.q)({setModalContent:c,hideModal:u,showModal:m}),o({type:"error",msg:"Failed to authorize. Please verify wallet and try again."});return}throw e}},{onMutate:e=>{t&&t(e)},onSuccess:async e=>(d({name:"Update Account Name",event:{}}),await i.invalidateQueries([R.yI]),null==a?void 0:a(e)),onError:e=>{d({name:"Update Account Name Error",event:{}}),null==l||l(e)},onSettled:(e,t)=>{null==n||n(e,t)}})}({onSuccess:()=>{t({type:"success",msg:"Account Name Updated Successfully"}),e()},onError:()=>{t({type:"error",msg:"Something went wrong"}),e()}});return(0,l.jsx)(eD.J9,{initialValues:{newAccountName:""},validationSchema:eM(n),onSubmit:e=>{let{newAccountName:t}=e;a&&i({accountId:null==a?void 0:a.id.toString(),name:t})},children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start border-b mb-default p-default border-neutral-border-surface-default",children:[(0,l.jsx)(u.a,{category:"label",className:"text-[20px]",children:"Update Account Name"}),(0,l.jsx)(u.a,{category:"paragraph",tag:"p",children:"This name will identify this account from others."})]}),(0,l.jsxs)(eD.l0,{className:"px-default mb-default",children:[(0,l.jsx)(eD.gN,{type:"string",name:"newAccountName",children:e=>{let{field:t,meta:a}=e;return(0,l.jsx)(eP.I,{message:a.error?{text:a.error,intent:"error"}:null,className:(0,S.Z)({"mb-default":!a.error,"mb-medium":!!a.error}),...t,onChange:e=>{eR.test(e.target.value)&&t.onChange(e)}})}}),(0,l.jsx)(g.z,{type:"submit",intent:"primary",disabled:!e.isValid||d,children:"Save"})]})]})})}let eW=e=>{let{className:t}=e,{hideDrawer:a}=(0,ev.yT)(),{closeFlyout:n}=(0,r.u)(),s=(0,j.a)();return(0,l.jsx)("div",{"data-cy":"flyout-close-btn",className:(0,ei.m)("h-[30px] w-[30px] items-center justify-center cursor-pointer hover:bg-neutral-fill-surface-hover",t),onClick:()=>{s({name:"close_account_flyout",event:{route:"close_button"}}),n(),a()},children:(0,l.jsx)(W.J,{name:"xmark-large",prefix:"sharp-solid",color:"default"})})};function eq(){var e;let{account:t}=(0,r.u)(),{setModalContent:a,visible:n,showModal:d}=(0,s.dd)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eW,{className:"flex lg:hidden ml-x-small mt-x-small -mb-x-small"}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-default",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(null==t?void 0:t.wasRecentlyLiquidated)?(0,l.jsx)(W.J,{name:"lightbulb-exclamation-on",prefix:"sharp-regular",size:"medium",className:"mr-default",color:"danger"}):null,(0,l.jsxs)("div",{children:[(0,l.jsx)(u.a,{category:"label",mode:"default",tag:"p",className:"-mb-xx-small",children:null==t?void 0:t.name}),(0,l.jsxs)(u.a,{category:"overline",mode:"large",tag:"p",className:"text-[11px]",children:["$",(0,o._)(null==t?void 0:null===(e=t.openInterest)||void 0===e?void 0:e.notional)]})]})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{"data-cy":"transfer-funds-btn",className:"h-[30px] w-[30px] flex items-center justify-center cursor-pointer hover:bg-neutral-fill-surface-hover",onClick:()=>{a({body:(0,l.jsx)(i.Fy,{}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}}),d()},children:(0,l.jsx)(W.J,{name:"arrow-down-arrow-up",prefix:"sharp-solid",color:"default"})}),(0,l.jsx)(ee.X,{options:[{text:"Edit Account Name",icon:{name:"pencil"},action:()=>{a({body:(0,l.jsx)(eE,{}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}}),n||d()}},{text:"Delete Account",icon:{name:"trash-can",color:"error"},tooltipText:(null==t?void 0:t.canClose)?void 0:"In order to delete an account, must have no open positions or deposited margin collateral (USDC).",disabled:!(null==t?void 0:t.canClose),textClassName:"text-signal-error-default",action:()=>{a({body:(0,l.jsx)(eF,{}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{maxWidth:430}}),n||d()}}],children:(0,l.jsx)("div",{className:"cursor-pointer hover:bg-neutral-fill-surface-hover p-x-small","data-cy":"update-account-menu-btn",children:(0,l.jsx)(W.J,{name:"ellipsis-vertical",prefix:"sharp-solid",color:"default"})})}),(0,l.jsx)(eW,{className:"hidden lg:flex"})]})]})]})}var eL=a(28741),e_=a(95612),eJ=a(55509),eZ=a(3580);function eO(e){let{health:t}=e,{color:a,mutedColor:n}=(0,e_.J)(t);return(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsx)("div",{children:(0,l.jsx)(m.k,{tooltipContent:"Represents the amount of collateral in excess of margin requirements for open positions",children:"Health"})}),(0,l.jsx)("div",{className:"flex items-center w-8/12 px-x-small",children:Array(10).fill(0).map((e,r)=>(0,l.jsx)("div",{className:"h-xx-small pr-x-small w-[10%]",children:(0,l.jsx)("div",{className:(0,S.Z)("w-full h-full rounded-full",{["bg-".concat(a)]:r+1<=Number(t)/10&&Number(t)>0,["bg-".concat(n)]:r+1>Number(t)/10})})},r))}),(0,l.jsxs)("div",{className:"flex items-center justify-end",children:[(0,l.jsxs)(u.a,{category:"label",mode:"default",className:"mr-x-small",children:[(0,c.J)(t),"%"]}),(0,l.jsx)(eZ.A,{health:t})]})]})}function eB(){var e,t,a,d;let{publicKey:x}=(0,v.O)(),{setModalContent:f,showModal:h}=(0,s.dd)(),{account:p}=(0,r.u)(),{dispatch:j}=(0,n.J)(),b=e=>{void 0!==p&&(j({type:"setActiveAccountId",payload:{publicKey:x,accountId:p.id,persist:!1}}),f({body:(0,l.jsx)(i.Fy,{showAccountSelector:!1,initialDirection:e}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}}),h())},{mutedColor:y,textColor:w}=(0,e_.J)(null!==(t=null==p?void 0:p.healthRatio)&&void 0!==t?t:"0");return(0,l.jsxs)("div",{className:"w-full rounded-md p-default bg-".concat(y),children:[(0,l.jsx)(m.k,{tooltipContent:"Represents the amount of cash available to invest or withdraw",className:"text-[11px] capitalize",children:"AVAILABLE MARGIN"}),(0,l.jsxs)(u.a,{category:"heading",mode:"small",tag:"h1",className:"mb-medium text-".concat(w),children:["$",(0,o._)(null==p?void 0:p.margins.availableMargin)]}),(0,l.jsx)("div",{className:"mb-medium",children:(0,l.jsx)(eO,{health:null!==(a=null==p?void 0:p.healthRatio)&&void 0!==a?a:"0"})}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-default",children:[(0,l.jsx)(m.k,{tooltipContent:"Represents the overall leverage for the entire account",children:"Leverage"}),(0,l.jsxs)(u.a,{category:"number",children:[p&&(0,eL.g)(p.leverageMultiple,2),"x"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-default",children:[(0,l.jsx)(m.k,{tooltipContent:"Represents the total value of collateral both available or currently used to meet margin requirements",children:"Total Collateral"}),(0,l.jsxs)(u.a,{category:"number",children:["$",(0,o._)(null==p?void 0:p.marginCollateral)]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-default",children:[(0,l.jsx)(m.k,{tooltipContent:"Represents the minimum amount of collateral required to meet margin requirement",children:"Total Required Margin"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)(u.a,{category:"number",mode:"default",children:[(0,c.J)(null==p?void 0:null===(e=p.margins)||void 0===e?void 0:e.totalRequiredMarginRatio),"%"]}),(0,l.jsx)(V.o,{}),(0,l.jsxs)(u.a,{category:"number",mode:"default",children:["$",(0,o._)(null!==(d=null==p?void 0:p.margins.totalRequiredMargin)&&void 0!==d?d:0)]})]})]}),(0,l.jsxs)("div",{className:"flex w-full",children:[(0,l.jsx)("div",{className:"w-1/2 mr-x-small",children:(0,l.jsx)(g.z,{"data-cy":"flyout-deposit-btn",intent:"secondary",className:"w-full",onClick:()=>b("deposit"),leftIconName:"arrow-down-from-dotted-line",children:(0,l.jsx)("span",{children:"Deposit"})})}),(0,l.jsx)("div",{className:"w-1/2 ml-x-small",children:(0,l.jsx)(g.z,{"data-cy":"flyout-withdraw-btn",intent:"secondary",className:(0,S.Z)("w-full",{"opacity-30":!(0,eJ.xP)(null==p?void 0:p.margins.availableMargin)}),onClick:()=>b("withdraw"),disabled:!(0,eJ.xP)(null==p?void 0:p.margins.availableMargin),leftIconName:"arrow-up-from-dotted-line",children:(0,l.jsx)("span",{children:"Withdraw"})})})]})]})}let e$=!1;function eQ(){let e=(0,j.a)(),{account:t}=(0,r.u)(),{publicKey:a}=(0,v.O)(),{setModalContent:d,showModal:o}=(0,s.dd)(),{dispatch:c}=(0,n.J)(),m=e=>{void 0!==t&&(c({type:"setActiveAccountId",payload:{publicKey:a,accountId:t.id,persist:!1}}),d({body:(0,l.jsx)(i.Fy,{initialDirection:e}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}}),o())};return(0,y.useEffect)(()=>{e$||((null==t?void 0:t.wasRecentlyLiquidated)&&e({name:"liquidations_display",event:{}}),e$=!0)},[null==t?void 0:t.wasRecentlyLiquidated,e]),(0,l.jsxs)("div",{className:"flex flex-col justify-start","data-cy":"account-flyout",children:[(0,l.jsx)("div",{className:"mb-default bg-neutral-fill-surface-background",children:(0,l.jsx)(eq,{})}),(null==t?void 0:t.wasRecentlyLiquidated)||(null==t?void 0:t.inLiquidation)||(null==t?void 0:t.canLiquidate)?(0,l.jsx)("div",{className:"px-default",children:(0,l.jsx)(b.U,{intent:"danger",heading:(null==t?void 0:t.wasRecentlyLiquidated)?"This account has been liquidated":"This account is in danger of liquidation",body:(null==t?void 0:t.wasRecentlyLiquidated)?(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(u.a,{category:"paragraph",mode:"small",children:"Failing to maintain collateral above account margin requirements results in account liquidation. You can reset your account and deposit more funds into the account to trade again."}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center w-auto gap-default mt-default",children:[(0,l.jsx)(g.z,{onClick:()=>{m("deposit")},className:"w-auto",intent:"primary",children:"Fund Account"}),(0,l.jsx)(u.a,{category:"paragraph",mode:"small",className:"italic",children:"Fund your account to reset it."})]})]}):(null==t?void 0:t.inLiquidation)?"This account is currently in liquidation.":(null==t?void 0:t.canLiquidate)?"In order to avoid liquidation, please deposit USDC":"In order to avoid liquidation, please deposit USDC, or close positions immediately.",iconName:(null==t?void 0:t.wasRecentlyLiquidated)?"lightbulb-exclamation-on":"seal-exclamation"})}):null,(0,l.jsxs)("div",{className:"flex flex-col items-start lg:flex-row",children:[(0,l.jsx)("div",{className:"w-full lg:w-1/2 p-default",children:(0,l.jsx)(p,{})}),(0,l.jsx)("div",{className:"w-full lg:w-1/2 p-default",children:(0,l.jsx)(eB,{})})]}),(0,l.jsx)("div",{className:"p-default",children:void 0!==t?(0,l.jsx)(eg,{account:t}):null})]})}},31368:function(e,t,a){a.d(t,{Q:function(){return p}});var l=a(52676),n=a(19593),r=a(49238),s=a(50699),i=a(91671),d=a(80003),o=a(75271),c=a(66793),u=a(81833),m=a(75137),x=a(12620),f=a(86924),h=a(34242);function p(){let[e,t]=(0,o.useState)(),[a,j]=(0,o.useState)("create-account"),{publicKey:g}=(0,d.O)(),{setModalContent:v,hideModal:b}=(0,r.dd)(),{dispatch:y}=(0,n.J)(),{mutate:w}=(0,s.q)({onMutate:()=>{j("creating-account")},onSuccess:e=>{let{marginAccountId:t}=e;console.log("successfully create account",{marginAccountId:t}),y({type:"setActiveAccountId",payload:{publicKey:g,accountId:t,persist:!0}}),j("deposit")},onTimeout:e=>{(0,x.h)({setModalContent:v,signature:e})},onError:()=>{v({body:(0,l.jsx)(f.y,{copy:"Creating account",nextModalComponent:p}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}})}});return"creating-account"===a?(0,l.jsx)(h.W,{copy:"Creating account"}):(0,l.jsxs)("div",{className:"",children:["review"!==a?(0,l.jsx)("div",{onClick:b,className:"cursor-pointer p-default",children:(0,l.jsx)(i.J,{name:"xmark-large",prefix:"sharp-solid",color:"default",size:"medium"})}):null,"create-account"===a?(0,l.jsx)(c.B,{onSubmit:e=>w({accountName:e.accountName})}):"deposit"===a?(0,l.jsx)(u.K,{onSubmit:e=>{t(e.depositAmount),j("review")}}):"review"===a?(0,l.jsx)(m.D,{amount:e,onBackButtonClick:()=>j("deposit")}):null]})}},75137:function(e,t,a){a.d(t,{D:function(){return j}});var l=a(52676),n=a(49238),r=a(31032),s=a(1510),i=a(48238),d=a(54801),o=a(91671),c=a(1151),u=a(45603),m=a(12620),x=a(86924),f=a(34242),h=a(81423),p=a(46402);let j=e=>{let{amount:t,onBackButtonClick:a}=e,{setModalContent:g}=(0,n.dd)(),{data:v}=(0,r.M)(),b=(0,i.a)(),{mutate:y}=(0,s.v)({onMutate:()=>{g({body:(0,l.jsx)(f.W,{copy:"Deposit Processing"}),options:{className:"fullscreen-modal-mobile",maxWidth:430,preventClose:!0}})},onSuccess:e=>{b({name:"Deposit Funds",event:{margin:t}}),g({body:(0,l.jsx)(h.I,{direction:"deposit",copy:"Deposit Complete",signature:e}),options:{className:"fullscreen-modal-mobile",maxWidth:430,preventClose:!0}})},onTimeout:e=>{(0,m.h)({setModalContent:g,signature:e})},onError:e=>{console.error(e),g({body:(0,l.jsx)(x.y,{copy:"Transaction Failed",nextModalComponent:()=>(0,l.jsx)(j,{amount:t,onBackButtonClick:a})}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}})}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start border-b p-default border-neutral-border-surface-default",children:[(0,l.jsx)("div",{onClick:a,className:"cursor-pointer mb-medium",children:(0,l.jsx)(o.J,{name:"arrow-left",prefix:"sharp-solid",color:"default",size:"medium"})}),(0,l.jsx)(c.a,{category:"label",className:"text-[20px]",children:"Review Deposit"})]}),(0,l.jsx)("div",{className:"p-default",children:(0,l.jsx)(p.N,{})}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full px-default py-x-small",children:[(0,l.jsx)("div",{className:"w-[45%] border-b border-neutral-border-surface-default"}),(0,l.jsx)(o.J,{name:"arrow-down",prefix:"sharp-solid",size:"small",color:"default",className:"fill-neutral-label-default"}),(0,l.jsx)("div",{className:"w-[45%] border-b border-neutral-border-surface-default"})]}),(0,l.jsxs)("div",{className:"p-default",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-default",children:[(0,l.jsx)(c.a,{category:"label",mode:"small",children:"From Account"}),(0,l.jsx)(c.a,{category:"number",children:null==v?void 0:v.name})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsx)(c.a,{category:"label",mode:"small",children:"Amount"}),(0,l.jsxs)(c.a,{category:"number",children:["$",(0,d._)(t)]})]})]}),(0,l.jsxs)("div",{className:"p-default",children:[(0,l.jsx)(u.z,{onClick:()=>{t&&y({margin:t.toString()})},intent:"primary",className:"mb-default",children:"Confirm Deposit"}),(0,l.jsxs)(c.a,{mode:"small",category:"paragraph",tag:"p",className:"text-center",children:["Funds will transfer to your account instantly and will be available immediately."," "]})]})]})}},86924:function(e,t,a){a.d(t,{y:function(){return d}});var l=a(52676),n=a(49238),r=a(91671),s=a(1151),i=a(45603);let d=e=>{let{copy:t,nextModalComponent:a,preventClose:d=!0}=e,{setModalContent:o}=(0,n.dd)();return(0,l.jsxs)("div",{className:"w-full h-[300px] flex flex-col justify-between items-center p-default",children:[(0,l.jsx)("div",{className:"mb-[40px]"}),(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(r.J,{name:"circle-exclamation",prefix:"sharp-solid",color:"danger",size:"medium"}),(0,l.jsx)(s.a,{category:"paragraph",className:"text-[26px] mt-default mb-medium",children:t})]}),(0,l.jsx)(i.z,{intent:"secondary",className:"self-end w-full",onClick:()=>{d?o({body:(0,l.jsx)(a,{}),options:{maxWidth:430,preventClose:!0}}):o({body:(0,l.jsx)(a,{}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{maxWidth:430}})},children:"Re-send Transaction"})]})}},34242:function(e,t,a){a.d(t,{W:function(){return s}});var l=a(52676),n=a(1151),r=a(30266);let s=e=>{let{copy:t}=e;return(0,l.jsxs)("div",{className:"w-full h-[300px] flex flex-col justify-center items-center",children:[(0,l.jsx)(r.$,{size:"medium"}),(0,l.jsx)(n.a,{category:"paragraph",className:"text-[26px] mt-default",children:t})]})}},81423:function(e,t,a){a.d(t,{I:function(){return m}});var l=a(52676),n=a(49238),r=a(59189),s=a(91671),i=a(1151),d=a(45603),o=a(63993),c=a(5788),u=a.n(c);let m=e=>{let{direction:t,copy:a,signature:c}=e,{hideModal:m}=(0,n.dd)(),x=new Date(new Date().getTime()+864e5);return(0,l.jsxs)("div",{className:"w-full h-[300px] text-center flex flex-col justify-between items-center p-default",children:[(0,l.jsx)("div",{className:"mb-[40px]"}),(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(s.J,{name:"check",prefix:"sharp-regular",color:"success",size:"medium"}),(0,l.jsx)(i.a,{category:"label",mode:"default",className:"text-[26px] mt-default",children:a}),"withdraw"===t?(0,l.jsxs)(i.a,{category:"paragraph",mode:"default",className:"mb-medium",children:["Your withdrawal will settle in your wallet by"," ",x.toLocaleDateString("en-US"),"\xa0",x.toLocaleTimeString("en-US",{hour12:!1}).slice(0,-3),"."]}):null,(0,l.jsx)(u(),{className:"text-[#88AEEC] mb-default",target:"_blank",rel:"noreferrer",href:"https://solscan.io/tx/".concat(c,"?cluster=").concat("devnet"===(0,o.S)()?"devnet":"mainnet"),children:(0,r.c)(c)})]}),(0,l.jsx)(d.z,{intent:"secondary",className:"self-end w-full",onClick:()=>{m()},children:"Close"})]})}},62654:function(e,t,a){a.d(t,{QI:function(){return Y},Fy:function(){return et},xd:function(){return ee}});var l=a(52676),n=a(50919),r=a(49238),s=a(46402),i=a(63943),d=a(66626),o=a(80003),c=a(95274),u=a(92323),m=a(31032);function x(){let{publicKey:e}=(0,o.O)(),{data:t}=(0,m.M)();return(0,c.a)([u.yB,null==e?void 0:e.toBase58(),null==t?void 0:t.id],async()=>{let a=await (0,d.W)({walletAddress:null==e?void 0:e.toBase58()}),{maxWithdrawableAmount:l}=await a.user.getWithdrawMarginQuote({marginAccountId:null==t?void 0:t.id});return l})}var f=a(91781),h=a(77581),p=a(88516),j=a(45924),g=a(75271),v=a(91671),b=a(1151),y=a(55509);function w(e){let{selectedTab:t,setSelectedTab:a}=e,{data:n}=(0,m.M)(),{data:r}=x();return(0,l.jsxs)("div",{className:"flex items-center w-full",children:[(0,l.jsxs)("div",{onClick:()=>a("deposit"),className:(0,j.Z)("cursor-pointer flex items-center justify-center w-1/2  p-default",{"border-b border-white":t===Y,"border-b border-neutral-border-surface-default":t!==Y}),children:[(0,l.jsx)(v.J,{name:"arrow-down-from-dotted-line",prefix:"sharp-solid",color:"default"}),(0,l.jsx)(b.a,{category:"label",mode:"small",className:(0,j.Z)("ml-x-small",{"text-neutral-paragraph-default":t!==Y}),children:"Deposit"})]}),(0,l.jsxs)("div",{onClick:()=>{(null==n?void 0:n.marginCollateral)&&r&&(0,y.xP)(null==n?void 0:n.margins.availableMargin)&&a("withdraw")},className:(0,j.Z)("cursor-pointer flex items-center justify-center w-1/2  p-default",{"border-b border-white":t===ee,"border-b border-neutral-border-surface-default":t!==ee,"text-neutral-paragraph-default":t!==ee,"opacity-30":!(null==n?void 0:n.marginCollateral)||!r||!(0,y.xP)(null==n?void 0:n.margins.availableMargin)}),children:[(0,l.jsx)(v.J,{name:"arrow-up-from-dotted-line",prefix:"sharp-solid",color:"default"}),(0,l.jsx)(b.a,{category:"label",mode:"small",className:(0,j.Z)("ml-x-small",{"text-neutral-paragraph-default":t!==ee}),children:"Withdraw"})]})]})}var N=a(75137),k=a(80452),I=a(91061),C=a(95823),A=a(2802),S=a(45603),P=a(5968),F=a(42664),T=a(38670),D=a(98558),z=a(1386),R=a(99722),M=a(18524);function E(e){let{setAmount:t,setMax:a,maxWithdrawAmount:n,disabled:r}=e,s=[(.25*Number(n)).toFixed(2),(.5*Number(n)).toFixed(2),(.75*Number(n)).toFixed(2)];return(0,l.jsxs)("div",{className:"flex w-full p-default",children:[(0,l.jsx)("div",{className:"w-1/4 pr-x-small",children:(0,l.jsx)("button",{type:"button",disabled:r,onClick:()=>{t(Number(s[0].toString()))},className:"flex items-center justify-center w-full rounded-md p-xx-small bg-neutral-fill-surface-background",children:(0,l.jsx)(b.a,{category:"label",className:"text-[11px]",mode:"default",children:"25%"})})}),(0,l.jsx)("div",{className:"w-1/4 pr-x-small",children:(0,l.jsx)("button",{type:"button",disabled:r,onClick:()=>{t(Number(s[1].toString()))},className:"flex items-center justify-center w-full rounded-md p-xx-small bg-neutral-fill-surface-background",children:(0,l.jsx)(b.a,{category:"label",className:"text-[11px]",mode:"default",children:"50%"})})}),(0,l.jsx)("div",{className:"w-1/4 pr-x-small",children:(0,l.jsx)("button",{type:"button",disabled:r,onClick:()=>{t(Number(s[2].toString()))},className:"flex items-center justify-center w-full rounded-md p-xx-small bg-neutral-fill-surface-background",children:(0,l.jsx)(b.a,{category:"label",className:"text-[11px]",mode:"default",children:"75%"})})}),(0,l.jsx)("div",{className:"w-1/4",children:(0,l.jsx)("button",{type:"button",disabled:r,onClick:()=>{a()},className:"flex items-center justify-center w-full rounded-md p-xx-small bg-neutral-fill-surface-background",children:(0,l.jsx)(b.a,{category:"label",className:"text-[11px]",mode:"small",children:"MAX"})})})]})}function W(e){let{onSubmit:t,maxWithdrawAmount:a,disabled:n}=e,{data:r}=(0,I.X)(),s=(0,D.N)(null==r?void 0:r.settlementDelay),i=R.Ry().shape({withdrawAmount:R.Rx().max(Number(a),"Must be less than ".concat(a)).positive("Must be above 0").required("Required"),acceptedSettlementDelay:R.O7().oneOf([!0],"Required")});return(0,l.jsx)(z.J9,{initialValues:{withdrawAmount:void 0,acceptedSettlementDelay:!1},validationSchema:i,onSubmit:e=>{t(e)},children:e=>(0,l.jsx)(z.l0,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(E,{disabled:n,setAmount:t=>e.setFieldValue("withdrawAmount",t),setMax:()=>{e.setFieldValue("withdrawAmount",a)},maxWithdrawAmount:a}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full p-default",children:[(0,l.jsx)("div",{className:"flex flex-col items-start",children:(0,l.jsx)(A.k,{tooltipContent:"USDC you would like to withdraw",textCategory:"paragraph",textSize:"default",children:"Amount"})}),(0,l.jsx)(z.gN,{name:"withdrawAmount",children:e=>{let{field:t,meta:a}=e;return(0,l.jsx)("div",{children:(0,l.jsx)(T.E,{disabled:n,style:{margin:0},className:(0,j.Z)("min-w-[140px] w-[140px] !m-0 !text-right",{"!border !border-signal-error-default":a.touched&&a.error}),icon:"usdc",iconPrefix:"sharp-solid",maxDecimals:2,onInputChange:t.onChange,...t})})}})]}),e.dirty?(0,l.jsx)("div",{className:"flex w-full px-default mb-default",children:(0,l.jsx)(P.U,{intent:"warning",heading:"",iconName:"clock",body:(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start text-start",children:[(0,l.jsxs)("span",{className:"mb-default",children:["I understand that there is a\xa0",(0,M.B)(null==r?void 0:r.settlementDelay)," ","hour settlement delay and USDC will not be in my wallet until\xa0",(0,C.n)({date:s,opts:{includeSeconds:!1}}),"."]}),(0,l.jsx)(z.gN,{type:"checkbox",name:"acceptedSettlementDelay",id:"acceptedSettlementDelay",children:e=>{let{field:t}=e;return(0,l.jsx)(F.X,{variant:"warning",className:"flex justify-center",label:"I understand",...t})}})]})})}):null,(0,l.jsx)("div",{className:"p-default",children:(0,l.jsx)(S.z,{type:"submit",intent:"primary",disabled:!e.isValid||void 0===e.values.withdrawAmount||n,children:"Withdraw"})})]})})})}var q=a(82250),L=a(54099),_=a(38211),J=a(48238),Z=a(54393),O=a(91040),B=a(82249),$=a(84263),Q=a(80714),K=a(54801),U=a(12620),V=a(86924),H=a(34242),X=a(81423);let G=e=>{let{fullClose:t=!1,amount:a,backComponent:n}=e,{data:i}=(0,I.X)(),{setModalContent:c}=(0,r.dd)(),{data:x}=(0,m.M)(),f=(0,J.a)(),h=(0,D.N)(null==i?void 0:i.settlementDelay),{mutate:p}=function(){let{onMutate:e,onSuccess:t,onError:a,onTimeout:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{publicKey:n}=(0,o.O)(),{connection:r}=(0,B.R)(),{data:s}=(0,m.M)(),{sendAndConfirmTx:i}=(0,L.Q)(),c=(0,$.NL)(),x=(0,J.a)();return(0,Q.D)(async e=>{let{margin:t}=e;if(!n)return(0,O.E)("Wallet not connected");if((null==s?void 0:s.id)===void 0)return(0,O.E)("No valid margin account");let a=await (0,d.W)({walletAddress:n.toBase58()}),o=await a.user.getWithdrawMarginTransaction({marginAccountId:null==s?void 0:s.id,margin:t}),{signature:c,error:u}=await i(o,r);if(u&&(0,Z.w)(u)){null==l||l(c);return}return c},{onMutate:()=>{console.log("mutate"),null==e||e()},onSuccess:async(e,a)=>{if(e)return x({name:"V3 Withdraw Margin",event:{...a,err:null,signature:e}}),null==t?void 0:t(e)},onError:(e,t)=>{console.log({err:e,params:t}),x({name:"V3 Withdraw Margin Error",event:{...t,err:e}}),null==a||a(e)},onSettled:async()=>{await c.invalidateQueries([u.yI]),await c.invalidateQueries([_.N9])}})}({onMutate:()=>{c({body:(0,l.jsx)(H.W,{copy:"Withdrawal Processing"}),options:{className:"fullscreen-modal-mobile",maxWidth:430,preventClose:!0}})},onSuccess:e=>{f({name:"Withdraw Funds",event:{margin:a}}),c({body:(0,l.jsx)(X.I,{direction:"withdraw",copy:"Withdrawal Complete",signature:e}),options:{className:"fullscreen-modal-mobile",maxWidth:430,preventClose:!0}})},onTimeout:e=>{(0,U.h)({setModalContent:c,signature:e})},onError:e=>{console.error(e),c({body:(0,l.jsx)(V.y,{copy:"Transaction Failed",nextModalComponent:()=>(0,l.jsx)(G,{fullClose:t,amount:a,backComponent:n}),preventClose:!0}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}})}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start border-b p-default border-neutral-border-surface-default",children:[(0,l.jsx)("div",{onClick:()=>{c({body:(0,l.jsx)(n,{}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}})},className:"cursor-pointer mb-medium",children:(0,l.jsx)(v.J,{name:"arrow-left",prefix:"sharp-solid",color:"default",size:"medium"})}),(0,l.jsx)(b.a,{category:"label",className:"text-[20px] ",children:"Review Withdrawal"})]}),(0,l.jsxs)("div",{className:"p-default",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-default",children:[(0,l.jsx)(b.a,{category:"label",mode:"small",children:"From Account"}),(0,l.jsx)(b.a,{category:"number",children:null==x?void 0:x.name})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsx)(b.a,{category:"label",mode:"small",children:"Amount"}),(0,l.jsxs)(b.a,{category:"number",children:["$",t?(0,K._)(null==x?void 0:x.marginCollateral):a]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full px-default py-x-small",children:[(0,l.jsx)("div",{className:"w-[45%] border-b border-neutral-border-surface-default"}),(0,l.jsx)(v.J,{name:"arrow-down",prefix:"sharp-solid",size:"small",color:"default",className:"fill-neutral-label-default"}),(0,l.jsx)("div",{className:"w-[45%] border-b border-neutral-border-surface-default"})]}),(0,l.jsx)("div",{className:"p-default",children:(0,l.jsx)(s.N,{})}),(0,l.jsx)("div",{className:"px-default",children:(0,l.jsx)(P.U,{iconName:"circle-check",intent:"success",heading:"",body:(0,l.jsx)("div",{className:"flex flex-col items-start justify-start text-start",children:(0,l.jsxs)("span",{className:"",children:["I understand that there is a\xa0",(0,M.B)(null==i?void 0:i.settlementDelay)," hour settlement delay and USDC will not be in my wallet until\xa0",(0,C.n)({date:h,opts:{includeSeconds:!1}})]})})})}),(0,l.jsx)("div",{className:"p-default",children:(0,l.jsx)(S.z,{onClick:()=>{x&&(t?p({margin:x.marginCollateral}):!t&&a&&p({margin:a}))},intent:"primary",className:"mb-default",children:"Confirm Withdrawal"})})]})},Y="deposit",ee="withdraw";function et(e){let{initialDirection:t=Y,showAccountSelector:a=!0}=e,[d,o]=(0,g.useState)(t),{data:c}=(0,h.g)(),{setModalContent:u}=(0,r.dd)(),{data:m,isSuccess:v}=(0,f.V)(),b=!!v&&("deposit"===d?m<n.gM:m<n.gM+n.SH),{data:y}=x();return(0,l.jsxs)("div",{"data-cy":"transfer-funds-modal",children:[b?(0,l.jsx)("div",{className:"m-default",children:(0,l.jsx)(q.K,{body:"deposit"===d?"Depositing into a Trading Account requires a small amount of SOL for gas on Solana.":"Withdrawing from a Trading Account requires a small amount of SOL for gas on Solana."})}):null,(0,l.jsxs)("div",{className:(0,j.Z)({"opacity-20 cursor-not-allowed":b}),children:[a?(0,l.jsx)(i.p,{onAccountSelectorChange:p.Z,hideDeposit:!0}):null,(0,l.jsx)(w,{selectedTab:d,setSelectedTab:o}),"deposit"===d?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(k.S,{disabled:b,onSubmit:e=>{u({body:(0,l.jsx)(N.D,{amount:Number(e.depositAmount),onBackButtonClick:()=>{u({body:(0,l.jsx)(et,{initialDirection:"deposit"}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{className:"fullscreen-modal-mobile",maxWidth:430}})}}),options:{className:"fullscreen-modal-mobile",maxWidth:430}})},maxDepositAmount:c})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(W,{disabled:b,onSubmit:e=>{var t;u({body:(0,l.jsx)(G,{amount:null===(t=e.withdrawAmount)||void 0===t?void 0:t.toString(),backComponent:()=>(0,l.jsx)(et,{initialDirection:"withdraw"})}),options:{className:"fullscreen-modal-mobile",maxWidth:430}})},maxWithdrawAmount:y})}),(0,l.jsx)("div",{className:"p-default",children:(0,l.jsx)(s.N,{})})]})]})}},36844:function(e,t,a){a.d(t,{f:function(){return s}});var l=a(52676),n=a(45924),r=a(29524);function s(e){let{children:t,noPadding:a,className:s}=e;return(0,l.jsx)("div",{className:(0,r.m)((0,n.Z)("w-full border rounded-md border-neutral-border-surface-default bg-neutral-fill-surface-background overflow-hidden",{"p-0":a,"p-default":!a}),s),children:t})}},67376:function(e,t,a){a.d(t,{s:function(){return i}});var l=a(52676),n=a(63993),r=a(5788),s=a.n(r);function i(e){let{signature:t}=e;return(0,l.jsx)("div",{className:"flex flex-col w-full p-default bg-neutral-fill-surface-background",children:(0,l.jsxs)(s(),{"data-cy":"tx-sig-link",className:"flex items-center justify-start overflow-x-scroll text-neutral-paragraph-default no-scrollbar",target:"_blank",rel:"noreferrer",href:"https://solscan.io/tx/".concat(t,"?cluster=").concat("devnet"===(0,n.S)()?"devnet":"mainnet"),children:[(0,l.jsx)("img",{className:"mr-default",width:"20",height:"20",src:"/images/solscan.png",alt:"SolScan logo"}),"View on SolScan"]})})}},63943:function(e,t,a){a.d(t,{p:function(){return P}});var l=a(52676),n=a(71075),r=a(19593),s=a(49238),i=a(68459),d=a(31368),o=a(62654),c=a(97881),u=a(31032),m=a(97062),x=a(78688),f=a(78433),h=a(91671),p=a(1151),j=a(45603),g=a(51035),v=a(39636),b=a(2808);let y=e=>{let{type:t="default",onClick:a,selected:n,disabled:r=!1,label:s,className:i=""}=e,d=(0,b.j)("w-[16px] h-[16px] rounded-full flex justify-center items-center border",{variants:{type:{disabled:"border-neutral-fill-surface-background",default:"border-brand-default",reward:"border-decorative-reward-default"}}}),o=(0,b.j)("transition-all duration-100  rounded-full",{variants:{type:{default:"bg-brand-default",reward:"bg-decorative-reward-default"},selected:{true:"w-[8px] h-[8px]",false:"w-0 h-0"}}});return(0,l.jsxs)("label",{className:(0,v.m)("flex items-center",i),children:[(0,l.jsx)("input",{className:"hidden",defaultChecked:n}),(0,l.jsx)("div",{onClick:e=>a(e),className:d({type:r?"disabled":t}),children:!r&&(0,l.jsx)("div",{className:o({type:t,selected:n})})}),s&&(0,l.jsx)("div",{className:"ml-default ".concat(r?"text-neutral-paragraph-default":"text-neutral-label-default"),children:s})]})};var w=a(3580),N=a(38850),k=a(49178),I=a(80003),C=a(45924),A=a(53765),S=a(75271);function P(e){var t,a;let{onAccountSelectorChange:v,hideDeposit:b=!1}=e,{showModal:P,setModalContent:F}=(0,s.dd)(),[T,D]=(0,S.useState)(!1),{data:z}=(0,x.K)(),{data:R,isError:M,isInitialLoading:E,isSuccess:W,refetch:q}=(0,m.o)({marketId:null!==(t=null==z?void 0:z.id.toString())&&void 0!==t?t:""}),{publicKey:L}=(0,I.O)(),{state:_,dispatch:J}=(0,r.J)(),{data:Z}=(0,u.M)(),{dispatch:O}=(0,i.A8)();(0,S.useEffect)(()=>{void 0===_.activeAccountId&&void 0!==R&&R.length>0&&J({type:"setActiveAccountId",payload:{publicKey:L,accountId:R[0].id,persist:!0}})},[R,J,L,_.activeAccountId]);let B=null!==(a=null==Z?void 0:Z.healthRatio)&&void 0!==a?a:"0";return(0,l.jsx)("div",{className:"border-b border-neutral-fill-surface-background",children:(0,l.jsx)(g.z,{open:T,trigger:(0,l.jsx)("div",{onClick:()=>{D(!T),v(!T)},className:(0,C.Z)("flex transition-all duration-300 flex-col rounded-t-lg justify-between w-full py-default px-default",{"bg-neutral-fill-surface-default pb-default":!T,"bg-neutral-fill-surface-background":T}),children:(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[E?(0,l.jsx)(k.o,{height:"24px",width:"100%",borderRadius:8,className:"mr-default"}):(0,l.jsx)(p.a,{category:"label",mode:"small",children:(null==Z?void 0:Z.name)||"Select Account"}),(0,l.jsxs)("div",{className:"flex items-center",children:[E?(0,l.jsx)(k.o,{height:"24px",width:"auto",borderRadius:8,className:"flex items-center"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.a,{category:"label",mode:"small",className:(0,C.Z)("transition-all duration-300 flex items-center mr-x-small",{"text-signal-error-default":new A.Z(B).lte(n.a),"text-signal-warning-default":new A.Z(B).lte(n.s)&&new A.Z(B).gt(n.a),"text-neutral-label-default":!0===T&&new A.Z(B).gt(n.s),"text-neutral-paragraph-default":new A.Z(B).gt(n.s)&&(!1===T||void 0===T)}),children:["$",(0,f.a)(null==Z?void 0:Z.marginCollateral)]}),(0,l.jsx)(w.A,{health:B})]}),(0,l.jsx)(h.J,{name:"sort",prefix:"sharp-solid",color:"auto",size:"x-small",className:"fill-neutral-label-default ml-default"})]})]})}),children:(0,l.jsxs)(l.Fragment,{children:[!b&&Z&&(0,l.jsx)("div",{className:"shadow-xl bg-neutral-fill-surface-background p-default shadow-[#00000060]",children:(0,l.jsxs)(j.z,{intent:"primary",className:"w-full",onClick:()=>{if(!L){(0,c.t)({setModalContent:F,showModal:P});return}F({header:{component:(0,l.jsx)(l.Fragment,{})},body:(0,l.jsx)(o.Fy,{initialDirection:"deposit"}),options:{maxWidth:430,className:"rounded-lg"}}),P()},children:[(0,l.jsx)(h.J,{name:"arrow-down-from-dotted-line",prefix:"sharp-solid",color:"auto",className:"mr-x-small"}),"Deposit"]})}),(0,l.jsxs)("div",{className:"h-full overflow-scroll max-h-[160px] no-scrollbar",children:[E&&(0,l.jsxs)("div",{className:"flex flex-col justify-center w-full gap-default p-default",children:[(0,l.jsx)(k.o,{height:"34px",width:"100%",borderRadius:8}),(0,l.jsx)(k.o,{height:"34px",width:"100%",borderRadius:8}),(0,l.jsx)(k.o,{height:"34px",width:"100%",borderRadius:8}),(0,l.jsx)(k.o,{height:"34px",width:"100%",borderRadius:8})]}),M&&(0,l.jsx)(N.i,{label:"Error loading accounts",variant:"md",refetch:q,className:"w-auto m-default"}),W&&R.length>0?(0,l.jsx)(l.Fragment,{children:R.map(e=>{var t;return(0,l.jsxs)("button",{onClick:()=>{J({type:"setActiveAccountId",payload:{publicKey:L,accountId:e.id,persist:!0}}),O({type:"reset"})},className:"flex items-center justify-between w-full p-default",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(y,{className:"mr-default",selected:(null==Z?void 0:Z.id)===e.id,type:"default",onClick:()=>{}}),(0,l.jsx)(p.a,{category:"label",mode:"small",children:e.name})]})," ",(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)(p.a,{category:"label",mode:"small",className:(0,C.Z)("transition-all duration-300 flex items-center mr-x-small",{"text-signal-error-default":new A.Z(e.healthRatio).lte(n.a),"text-signal-warning-default":new A.Z(e.healthRatio).lte(n.s)&&new A.Z(e.healthRatio).gt(n.a),"text-neutral-label-default":!0===T&&new A.Z(e.healthRatio).gt(n.s),"text-neutral-paragraph-default":new A.Z(e.healthRatio).gt(n.s)&&(!1===T||void 0===T)}),children:["$",(0,f.a)(e.marginCollateral)]}),(0,l.jsx)(w.A,{health:null!==(t=e.healthRatio)&&void 0!==t?t:""})]})]},e.id)})}):M?null:(0,l.jsx)("div",{className:"flex items-center justify-center w-full p-default",children:(0,l.jsx)(p.a,{category:"paragraph",mode:"default",children:"No Accounts Found"})})]}),(0,l.jsx)("div",{className:"border-b border-neutral-fill-surface-background pt-default pb-default px-default",style:{boxShadow:"0px -8px 10px rgba(0,0,0,0.3)"},children:(0,l.jsx)(j.z,{onClick:()=>{if(!L){(0,c.t)({setModalContent:F,showModal:P});return}F({body:(0,l.jsx)(d.Q,{}),options:{preventClose:!0,maxWidth:430}}),P()},intent:"secondary",children:"Create Account"})})]})})})}},84880:function(e,t,a){a.d(t,{n:function(){return W}});var l=a(52676),n=a(33228),r=a(31032),s=a(49238),i=a(90506),d=a(272),o=a(66626),c=a(51779),u=a(19206),m=a(91040),x=a(80003),f=a(95274),h=a(7399),p=a(87956),j=a(59189),g=a(66802),v=a(91671),b=a(1151),y=a(38053),w=a(78953),N=a(25382),k=a(21952),I=a(7017),C=a(70701),A=a(63993),S=a(86430),P=a(45924),F=a(37115),T=a(5788),D=a.n(T),z=a(75271),R=a(37878),M=a(52555);let E=e=>{let{date:t}=e,a=new Date(t.getTime()+12e5);return new Date().getTime()>a.getTime()?(0,F.WU)(t,"MM/dd/yyyy"):(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(C.I,{targetDate:t}),(0,l.jsx)(v.J,{name:"arrow-up-right",prefix:"sharp-regular",color:"label",size:"x-small",className:"ml-x-small"})]})};function W(e){let{filterBy:t}=e,[a,v]=(0,z.useState)(1),{data:C}=(0,r.M)(),{data:F}=(0,n.x)("marginAccountId"!==t),{data:T,isLoading:W,isError:q,refetch:L}=function(e){let{page:t,marginAccountId:a,enabled:l=!0}=e,{publicKey:n}=(0,x.O)(),{setModalContent:r,hideModal:p,showModal:j}=(0,s.dd)(),{setToast:g}=(0,i.pm)();return(0,f.a)([h.dV,n,a,t],async()=>{try{if(!n)return(0,m.E)("No wallet connected");let e=await (0,o.W)({walletAddress:n.toBase58()}),l=await e.user.getMarginTransferHistory({page:t,marginAccountId:a},(0,c.h)({publicKey:n}));return void 0===l?null:l}catch(e){throw e instanceof Error&&(0,u.f)(e)&&((0,d.q)({setModalContent:r,hideModal:p,showModal:j}),g({type:"error",msg:"Failed to get margin transfer history. Please verify wallet and try again."})),e}},{enabled:!!n&&l})}({page:a,marginAccountId:"marginAccountId"===t&&C?C.id:void 0});return W?(0,l.jsx)(R.f,{title:"Transfers",children:(0,l.jsx)(M.yV,{})}):q?(0,l.jsx)(R.f,{title:"Transfers",children:(0,l.jsx)(M.mw,{refetch:L})}):(null==T?void 0:T.events.length)===0?(0,l.jsx)(R.f,{title:"Transfers",children:(0,l.jsx)(M.gP,{filterBy:t})}):(0,l.jsxs)(R.f,{title:"Transfers",children:[(0,l.jsx)("div",{className:"overflow-x-scroll no-scrollbar px-default lg:px-0",children:(0,l.jsx)(w.i,{className:"lg:min-w-0 min-w-[900px]",head:(0,l.jsxs)(I.S,{size:"header",children:[(0,l.jsx)(k.x,{children:"Time"}),"marginAccountId"!==t&&(0,l.jsx)(k.x,{children:"Account"}),(0,l.jsx)(k.x,{children:"Direction"}),(0,l.jsx)(k.x,{children:"Value"}),(0,l.jsx)(k.x,{className:"min-w-[150px]",children:"Maturity Date"}),(0,l.jsx)(k.x,{})]}),children:null==T?void 0:T.events.map(e=>(0,l.jsxs)(I.S,{children:[(0,l.jsx)(N.p,{className:"flex flex-col align-start",children:(0,l.jsx)(b.a,{category:"paragraph",mode:"small",children:e.timestamp?(0,p.N)(e.timestamp):"--"})}),"marginAccountId"!==t&&(0,l.jsx)(N.p,{children:(0,l.jsx)(b.a,{category:"label",mode:"small",children:F&&F[e.marginAccountId]?F[e.marginAccountId].name:"Deleted Account [".concat(e.marginAccountId,"]")})}),(0,l.jsx)(N.p,{children:(0,l.jsx)(b.a,{category:"label",mode:"small",className:(0,P.Z)({"text-signal-success-default":"deposit"===e.marginTransferKind,"text-signal-error-default":"withdraw"===e.marginTransferKind}),children:(0,S.k)(e.marginTransferKind)})}),(0,l.jsx)(N.p,{children:(0,l.jsxs)(b.a,{category:"label",mode:"small",children:["$",(0,g.E)(Number(e.margin))]})}),(0,l.jsx)(N.p,{children:(0,l.jsx)(b.a,{category:"paragraph",mode:"small",children:null!==e.settlementRequestMaturity?(0,l.jsx)(E,{date:e.settlementRequestMaturity}):"--"})}),(0,l.jsx)(N.p,{children:(0,l.jsx)(D(),{className:"text-signal-info-default mb-default",target:"_blank",rel:"noreferrer",href:"https://solscan.io/tx/".concat(e.signature,"?cluster=").concat("devnet"===(0,A.S)()?"devnet":"mainnet"),children:(0,j.c)(e.signature)})})]},e.signature))})}),(0,l.jsx)(y.t,{currentPage:a,totalPages:(null==T?void 0:T.pageCount)||0,onPageChange:v,eventCount:(null==T?void 0:T.eventCount)||0})]})}},89917:function(e,t,a){a.d(t,{n:function(){return L}});var l=a(52676),n=a(49238),r=a(33228),s=a(31032),i=a(78688),d=a(82330),o=a(90506),c=a(272),u=a(66626),m=a(51779),x=a(19206),f=a(91040),h=a(80003),p=a(95274),j=a(7399),g=a(48238),v=a(87956),b=a(91671),y=a(1151),w=a(38053),N=a(78953),k=a(25382),I=a(21952),C=a(7017),A=a(86430),S=a(45924),P=a(75271),F=a(37878),T=a(52555),D=a(59189),z=a(66802),R=a(63993),M=a(5788),E=a.n(M),W=a(34603);function q(e){let{tradeEvent:t}=e,{data:a}=(0,r.x)(),{data:n}=(0,d.K)();return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-start px-default mb-default",children:[(0,l.jsx)(y.a,{category:"label",mode:"large",children:"Position"}),(0,l.jsx)(y.a,{category:"label",mode:"large",className:(0,S.Z)("ml-x-small",{"text-signal-success-default":"opened"===t.tradeKind,"text-signal-error-default":"closed"===t.tradeKind,"text-signal-info-default":"modified"===t.tradeKind}),children:(0,A.k)(t.tradeKind)})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between w-full px-default mb-default",children:[(0,l.jsx)(W.j,{label:"Timestamp",data:t.timestamp?(0,v.N)(t.timestamp):"--"}),(0,l.jsx)(W.j,{label:"Account",data:a&&a[t.marginAccountId]?a[t.marginAccountId].name:"Deleted Account ".concat(t.marginAccountId)})]}),(0,l.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default mb-default"}),(0,l.jsxs)("div",{className:"flex justify-between w-full px-default mb-default",children:[(0,l.jsx)(W.j,{label:"Market",data:n&&n[t.marketId]&&n[t.marketId].metadata?n[t.marketId].metadata.name:"--"}),(0,l.jsx)(W.j,{label:"Direction",data:(0,A.k)(t.side)})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full px-default mb-default",children:[(0,l.jsx)(W.j,{label:"Fill Price",data:"$".concat((0,z.E)(Number(t.fillPrice)))}),(0,l.jsx)(W.j,{label:"Index Price",data:"$".concat((0,z.E)(Number(t.indexPrice)))})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full px-default mb-default",children:[(0,l.jsx)(W.j,{label:"Traded Sqft",data:t.openInterestDelta.size.toString()}),(0,l.jsx)(W.j,{label:"Notional Traded",data:"$".concat(t.openInterestDelta.notional)})]}),("closed"===t.tradeKind||"modified"===t.tradeKind)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default mb-default"}),(0,l.jsxs)("div",{className:"flex justify-between w-full px-default mb-default",children:[(0,l.jsx)(W.j,{label:"Profit & Loss",data:"$".concat(t.pnl)}),(0,l.jsx)("div",{})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full px-default mb-default",children:[(0,l.jsx)(W.j,{label:"Price Performance",data:"$".concat(t.pricePerformance)}),(0,l.jsx)(W.j,{label:"Funding Performance ",data:"$".concat(t.fundingPerformance)})]})]}),"modified"===t.tradeKind&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default mb-default"}),(0,l.jsxs)("div",{className:"flex justify-between w-full px-default mb-default",children:[(0,l.jsx)(W.j,{label:"New Position Sqft",data:t.newOpenInterest.size.toString()}),(0,l.jsx)(W.j,{label:"New Position Value",data:"$".concat(t.newOpenInterest.notional.toString())})]})]}),(0,l.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default mb-default"}),(0,l.jsxs)("div",{className:"flex justify-between w-full px-default mb-default",children:[(0,l.jsx)(W.j,{label:"Signature",data:(0,l.jsx)(E(),{className:"text-signal-info-default mb-default",target:"_blank",rel:"noreferrer",href:"https://solscan.io/tx/".concat(t.signature,"?cluster=").concat("devnet"===(0,R.S)()?"devnet":"mainnet"),children:(0,D.c)(t.signature)}),dataClassName:"text-signal-info-default"}),(0,l.jsx)(W.j,{label:"Total Fee",data:"-$".concat(t.tradeFee),dataClassName:"text-trend-downtrend-default"})]})]})]})}function L(e){let{filterBy:t}=e,{data:a}=(0,i.K)(),[D,z]=(0,P.useState)(1),{data:R}=(0,s.M)(),{setModalContent:M,showModal:E}=(0,n.dd)(),{data:W}=(0,r.x)("marginAccountId"!==t),{data:L}=(0,d.K)("marketId"!==t),{data:_,isLoading:J,isError:Z,refetch:O}=function(e){let{page:t,marketId:a,marginAccountId:l,enabled:r=!0}=e,{publicKey:s}=(0,h.O)(),{setModalContent:i,hideModal:d,showModal:g}=(0,n.dd)(),{setToast:v}=(0,o.pm)();return(0,p.a)([j.R,s,l,a,t],async()=>{try{if(!s)return(0,f.E)("No wallet connected");let e=await (0,u.W)({walletAddress:s.toBase58()}),n=await e.user.getTradeHistory({page:t,marketId:a,marginAccountId:l},(0,m.h)({publicKey:s}));return void 0===n?null:n}catch(e){throw e instanceof Error&&(0,x.f)(e)&&((0,c.q)({setModalContent:i,hideModal:d,showModal:g}),v({type:"error",msg:"Failed to get trade history. Please verify wallet and try again."})),e}},{enabled:!!s&&r})}({page:D,marketId:"marketId"===t&&(null==a?void 0:a.id)?a.id:void 0,marginAccountId:"marginAccountId"===t&&R?R.id:void 0}),B=(0,g.a)();return J?(0,l.jsx)(F.f,{title:"Trades",children:(0,l.jsx)(T.yV,{})}):Z?(0,l.jsx)(F.f,{title:"Trades",children:(0,l.jsx)(T.mw,{refetch:O})}):(null==_?void 0:_.events.length)===0?(0,l.jsx)(F.f,{title:"Trades",children:(0,l.jsx)(T.aM,{filterBy:t})}):(0,l.jsxs)(F.f,{title:"Trades",children:[(0,l.jsx)("div",{className:"overflow-x-scroll no-scrollbar px-default lg:px-0",children:(0,l.jsx)(N.i,{className:"lg:min-w-0 min-w-[900px]",head:(0,l.jsxs)(C.S,{size:"header",children:[(0,l.jsx)(I.x,{children:"Time"}),"marginAccountId"!==t&&(0,l.jsx)(I.x,{children:"Account"}),"marketId"!==t&&(0,l.jsx)(I.x,{children:"Market"}),(0,l.jsx)(I.x,{children:"Type"}),(0,l.jsx)(I.x,{children:"Direction"}),(0,l.jsx)(I.x,{children:"Value"}),(0,l.jsx)(I.x,{})]}),children:null==_?void 0:_.events.map(e=>(0,l.jsxs)(C.S,{className:"cursor-pointer hover:bg-neutral-fill-surface-background",onClick:()=>{M({body:(0,l.jsx)(q,{tradeEvent:e}),header:{component:(0,l.jsx)(l.Fragment,{})},options:{maxWidth:392}}),E(),B({name:"trades_history_item_expanded",event:{route:window.location.pathname}})},children:[(0,l.jsx)(k.p,{className:"flex flex-col align-start",children:(0,l.jsx)(y.a,{category:"paragraph",mode:"small",children:e.timestamp?(0,v.N)(e.timestamp):"--"})}),"marginAccountId"!==t&&(0,l.jsx)(k.p,{children:(0,l.jsx)(y.a,{category:"label",mode:"small",children:W&&W[e.marginAccountId]?W[e.marginAccountId].name:"Deleted Account [".concat(e.marginAccountId,"]")})}),"marketId"!==t&&(0,l.jsx)(k.p,{children:(0,l.jsx)(y.a,{category:"paragraph",mode:"small",children:L&&L[e.marketId]&&L[e.marketId].metadata?L[e.marketId].metadata.name:"--"})}),(0,l.jsx)(k.p,{children:(0,l.jsx)(y.a,{category:"label",mode:"small",className:(0,S.Z)("ml-x-small",{"text-signal-success-default":"opened"===e.tradeKind,"text-signal-error-default":"closed"===e.tradeKind,"text-signal-info-default":"modified"===e.tradeKind}),children:(0,A.k)(e.tradeKind)})}),(0,l.jsx)(k.p,{children:(0,l.jsx)(y.a,{category:"paragraph",mode:"small",children:(0,A.k)(e.side)})}),(0,l.jsx)(k.p,{children:(0,l.jsxs)(y.a,{category:"paragraph",mode:"small",children:["$",e.openInterestDelta.notional]})}),(0,l.jsx)(k.p,{children:(0,l.jsx)(b.J,{name:"arrow-up-right",prefix:"sharp-regular",color:"label",size:"x-small"})})]},e.signature))})}),(0,l.jsx)(w.t,{currentPage:D,totalPages:(null==_?void 0:_.pageCount)||0,onPageChange:z,eventCount:(null==_?void 0:_.eventCount)||0})]})}},97062:function(e,t,a){a.d(t,{o:function(){return n}});var l=a(33228);function n(e){let{marketId:t}=e;return(0,l.J)(e=>e.marginAccounts.filter(e=>!e.positions.some(e=>e.marketId===t)).sort((e,t)=>e.id>t.id?1:e.id<t.id?-1:0))}},12044:function(e,t,a){a.d(t,{F:function(){return n}});var l=a(82330);function n(){return(0,l.e)(e=>e.reduce((e,t)=>({...e,[t.id.toString()]:t.metadata}),{}))}},78688:function(e,t,a){a.d(t,{K:function(){return i}});var l=a(45487),n=a(66626),r=a(95274),s=a(42337);function i(e){let{data:t,isSuccess:a}=(0,l.y)();return(0,r.a)([s.HU,null==t?void 0:t.market],async()=>{let e=await (0,n.W)();return await e.account.getMarket({market:(null==t?void 0:t.market)||""})},{select:e,enabled:a&&!!(null==t?void 0:t.market)&&(null==t?void 0:t.market)!=="11111111111111111111111111111111",refetchInterval:3e3,retry:1})}},45487:function(e,t,a){a.d(t,{y:function(){return d}});var l=a(66626),n=a(91040),r=a(95274),s=a(66643),i=a(76128);function d(){var e;let{parclId:t,select:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=(0,s.useRouter)(),o=null!==(e=null==t?void 0:t.toString())&&void 0!==e?e:d.query.parcl_id;return(0,r.a)([i.qB,o],async()=>{if(!o)return(0,n.E)("parclId is undefined");let e=await (0,l.W)({});return await e.realEstateData.getParclInfo(o)},{enabled:void 0!==o,staleTime:6e4,select:a})}},13537:function(e,t,a){a.d(t,{Cy:function(){return n},WU:function(){return l},iR:function(){return r}});let l="v3-modify-quote",n="v3-position-mod-limits",r="v3-close-quote"},67997:function(e,t,a){a.d(t,{_:function(){return c}});var l=a(60057),n=a(31032),r=a(66626),s=a(91040),i=a(80003),d=a(95274),o=a(13537);function c(e){let{input:t,inputKind:a,marketId:c,maxSlippage:u}=e,{route:m}=(0,l.y)(),{data:x}=(0,n.M)(),{publicKey:f}=(0,i.O)();return(0,d.a)([o.iR,null==f?void 0:f.toBase58(),null==x?void 0:x.id,c,a,t,u],async()=>{try{if(void 0===t)return(0,s.E)("input is undefined");if(void 0===c)return(0,s.E)("marketId is undefined");let e=await (0,r.W)({walletAddress:null==f?void 0:f.toBase58()});return await e.user.getClosePositionQuote({marginAccountId:(null==x?void 0:x.id)||0,marketId:c,input:t,inputKind:a,slippageTolerance:u})}catch(e){throw console.error({error:e}),e}},{retry:!1,enabled:"edit_position_success"!==m&&void 0!==t&&""!==t&&Number(t)>0&&(null==x?void 0:x.id)!==void 0&&null!==f&&void 0!==c})}},71177:function(e,t,a){a.d(t,{A:function(){return n}});var l=a(33228);function n(e){return(0,l.J)(t=>t.marginAccounts.filter(t=>t.positions.some(t=>t.marketId===(null==e?void 0:e.toString()))).sort((e,t)=>Number(e.openInterest.size)-Number(t.openInterest.size)))}},46896:function(e,t,a){a.d(t,{n:function(){return v}});var l=a(49238),n=a(72008),r=a(92323),s=a(31032),i=a(42337),d=a(79775),o=a(54099),c=a(48238),u=a(66626),m=a(54393),x=a(91040),f=a(80003),h=a(82249),p=a(84263),j=a(80714),g=a(96879);function v(){let{onMutate:e,onSuccess:t,onError:a,onTimeout:v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{publicKey:b,disconnect:y}=(0,f.O)(),{connection:w}=(0,h.R)(),{data:N}=(0,s.M)(),{sendAndConfirmTx:k}=(0,o.Q)(),I=(0,p.NL)(),C=(0,c.a)(),{refetch:A}=(0,d.z)(),{setModalContent:S,hideModal:P,showModal:F}=(0,l.dd)();return(0,j.D)(async e=>{var t,a;let l,{sizeDelta:r,side:s,fullClose:i,slippageTolerance:d,marketId:o}=e;if(!b)return(0,x.E)("Wallet not connected");if(void 0===o)return(0,x.E)("No valid market");let{data:c}=await A();if(null==c?void 0:c.violation)return y(),(0,n.Q)({showModal:F,hideModal:P,setModalContent:S}),(0,x.E)("Compliance violation");let f=await (0,u.W)({walletAddress:b.toBase58()});console.log({tx:l=i?await f.user.getClosePositionTransaction({marketId:o,marginAccountId:null!==(t=null==N?void 0:N.id)&&void 0!==t?t:"",slippageTolerance:d,percentClose:100}):await f.user.getModifyPositionTransaction({marketId:o,sizeDelta:Number(r),side:s,marginAccountId:null!==(a=null==N?void 0:N.id)&&void 0!==a?a:"",slippageTolerance:d})});let{signature:h,error:p}=await k(l,w);if(p&&(0,m.w)(p)){null==v||v(h);return}return h},{onMutate:()=>{null==e||e()},onSuccess:(e,a)=>{if(e)return C({name:"V3 Modify Position",event:{...a,err:null,signature:e}}),null==t||t(e,a),I.invalidateQueries([g.xT]),I.invalidateQueries([i.HU]),I.invalidateQueries([g.R6]),I.invalidateQueries([r.yI])},onError:(e,t)=>{console.error(e),C({name:"V3 Modify Position Error",event:{...t,err:e.message}}),null==a||a(e)},onSettled:()=>{}})}},30503:function(e,t,a){a.d(t,{n:function(){return m}});var l=a(49238),n=a(90506),r=a(272),s=a(66626),i=a(51779),d=a(29986),o=a(19206),c=a(80003),u=a(95274);function m(){let{accountId:e,marketId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{publicKey:a}=(0,c.O)(),{setToast:m}=(0,n.pm)(),{setModalContent:x,hideModal:f,showModal:h}=(0,l.dd)();return(0,u.a)(["liquidation-events",null==a?void 0:a.toBase58(),e,t],async()=>{try{let l=await (0,s.W)({walletAddress:null==a?void 0:a.toBase58()});return await l.user.getLiquidationHistory({marginAccountId:e,marketId:t},(0,i.h)({publicKey:a}))}catch(e){throw e instanceof Error&&(0,o.f)(e)&&((0,r.q)({setModalContent:x,hideModal:f,showModal:h}),m({type:"error",msg:"Failed to get liquidation history. Please verify wallet and try again."})),e}},{enabled:function(){try{let e=(0,d.Hz)({publicKey:a}),t=!!(0,i.h)({publicKey:a});return!!a&&e&&t}catch(e){return!1}}(),retry:!1,refetchOnWindowFocus:!1,select:e=>{var t;return Object.entries(null!==(t=e["0"])&&void 0!==t?t:{}).map(e=>{let[t,a]=e;return[...Object.entries(a).map(e=>{let[t,a]=e;return a.positionLiquidations}).flat()]}).flat()}})}},47433:function(e,t,a){a.d(t,{O4:function(){return d},sn:function(){return i}});var l=a(77097),n=a(92267),r=a(57562);let s="max-slippage-setting";function i(e){(0,r.L)(s,e)}function d(){let e=(0,n.r)(s);return void 0===e||""===e?l.z:e}},51035:function(e,t,a){a.d(t,{z:function(){return i}});var l=a(52676),n=a(75271),r=a(23522),s=a.n(r);function i(e){let t=(0,n.useId)();return(0,l.jsx)(s(),{transitionTime:250,easing:"cubic-bezier(0.76, 0, 0.24, 1)",...e,contentElementId:"collapsible-content-".concat(t),triggerElementProps:{...e.triggerElementProps,id:"collapsible-trigger-".concat(t)}})}},3580:function(e,t,a){a.d(t,{A:function(){return d}});var l=a(52676),n=a(71075),r=a(39636),s=a(91671),i=a(53765);function d(e){let t,a,d,{health:o,className:c}=e;return new i.Z(o).gt(n.s)?(t="fill-signal-info-default",d="battery-full",a="bg-signal-info-background"):new i.Z(o).gt(n.a)?(t="fill-signal-warning-default",d="battery-half",a="bg-signal-warning-background"):(t="fill-signal-error-default",d="battery-empty",a="bg-signal-error-background"),(0,l.jsx)("div",{className:(0,r.m)("p-x-small rounded-md flex items-center justify-center ".concat(a),c),children:(0,l.jsx)(s.J,{className:t,name:d,prefix:"sharp-solid",color:"default"})})}},83052:function(e,t,a){a.d(t,{d:function(){return r}});var l=a(52676),n=a(29524);function r(e){let{className:t}=e;return(0,l.jsx)("div",{className:(0,n.m)("border-b border-neutral-border-surface-default",t)})}},95612:function(e,t,a){a.d(t,{J:function(){return r}});var l=a(71075),n=a(53765);function r(e){let t,a,r;return new n.Z(e).greaterThan(l.s)?(t="signal-info-default",a="neutral-fill-surface-background",r="neutral-label-default"):new n.Z(e).greaterThan(l.a)?(t="signal-warning-default",a="signal-warning-background",r="signal-warning-default"):(t="signal-error-default",a="signal-error-background",r="signal-error-default"),{color:t,mutedColor:a,textColor:r}}}}]);