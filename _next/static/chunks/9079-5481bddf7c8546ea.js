"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9079],{79079:function(e,a,l){l.d(a,{g:function(){return J}});var s=l(52676),t=l(66626),r=l(91040),i=l(80003),d=l(95274),n=l(46566),o=l(18880),c=l(74027);function m(){let{publicKey:e}=(0,i.O)(),{data:a,isSuccess:l}=(0,c.t)();return(0,d.a)([o.TK,null==e?void 0:e.toBase58()],async()=>{try{if(!e)return(0,r.E)("Please pass a wallet address");let a=await (0,t.W)({walletAddress:e.toBase58()});return await a.perpetualPoints.status()}catch(e){if(console.error({error:e}),(0,n.IZ)(e)){var a;if((null===(a=e.response)||void 0===a?void 0:a.status)===404)return{rank:0,grandTotalPoints:0,activeBoosts:[],numberOfParticipants:0,numberOfRankedUsers:0,lastUpdatedAt:0}}throw e}},{enabled:!!e&&l&&a})}var u=l(1151),x=l(49178),f=l(55509),h=l(53765),p=l(91671),j=l(4886);function g(e){let{boost:a}=e;return(0,s.jsxs)("div",{className:"border rounded-md mb-default p-default border-neutral-fill-surface-default",children:[(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[(0,s.jsx)(j.F,{value:a,label:"HOA NFT",variant:"HOA"}),(0,s.jsx)(p.J,{name:"circle-check",prefix:"sharp-regular",color:"success"})]}),(0,s.jsx)("div",{className:"mt-x-small",children:(0,s.jsx)(u.a,{category:"paragraph",mode:"small",children:"HOA boosts are only applied when NFT is present in wallet – 30% for first HOA and tiered boosts depending on how many additional HOA NFTs are held. If the HOA NFT is not present, you will not receive a boost for historical activity."})}),(0,s.jsx)("div",{className:"flex items-center justify-between mt-default",children:(0,s.jsx)(u.a,{category:"label",mode:"small",children:"Trades • LP"})})]})}function v(e){let{boost:a}=e;return(0,s.jsxs)("div",{className:"border rounded-md mb-default p-default border-neutral-fill-surface-default",children:[(0,s.jsx)("div",{className:"flex justify-between w-full",children:(0,s.jsx)(j.F,{value:a,label:"PRCL HODLER",variant:"PRCL",style:{background:"linear-gradient(90deg, #6FD572, #FF886D, #FAE24C, #4766EA)"}})}),(0,s.jsx)("div",{className:"mt-x-small",children:(0,s.jsx)(u.a,{category:"paragraph",mode:"small",children:"Get a linear boost based on how many $PRCL tokens you own vs. dollars in TVL (includes margin & liquidity)."})}),(0,s.jsx)("div",{className:"flex items-center justify-between mt-default"})]})}function b(e){let{referredBoost:a}=e;return(0,s.jsxs)("div",{className:"border rounded-md mb-default p-default border-neutral-fill-surface-default",children:[(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[(0,s.jsx)(j.F,{value:a,label:"REFERRED",variant:"REFERRAL"}),(0,s.jsx)(p.J,{name:"circle-check",prefix:"sharp-regular",color:"success"})]}),(0,s.jsx)("div",{className:"mt-x-small",children:(0,s.jsx)(u.a,{category:"paragraph",mode:"small",children:"This boost is applied to your account, forever, after you’ve been referred by another user."})}),(0,s.jsx)("div",{className:"flex items-center mt-default",children:(0,s.jsx)(u.a,{category:"label",mode:"small",children:"Trades • LP"})})]})}var N=l(99866),y=l(38850);function w(){var e,a,l,m;let{data:h,isLoading:j,isSuccess:g,isError:v,refetch:b}=function(){let{publicKey:e}=(0,i.O)(),{data:a,isSuccess:l}=(0,c.t)();return(0,d.a)([o.id,null==e?void 0:e.toBase58()],async()=>{try{if(!e)return(0,r.E)("Please pass a wallet address");let a=await (0,t.W)({walletAddress:e.toBase58()});return await a.perpetualPoints.pointsSummary()}catch(e){if(console.error({error:e}),(0,n.IZ)(e)){var a;if((null===(a=e.response)||void 0===a?void 0:a.status)===404)return{UserId:"",TimeJoined:0,ReferredBy:void 0,Rank:0,ReferralCode:void 0,Referrals:[],NumberOfHoasHeld:0,ActiveBoosts:[],BoostedFeeRebatePoints:0,BoostedLiquidationsPoints:0,BoostedLpPoints:0,BoostedEarlyBirdPoints:0,BoostedOpenInterestPoints:0,BoostedMarginPoints:0,BoostedNegativePricePnlPoints:0,BoostedTotalReferralPoints:0,BoostedGrandTotalPoints:0,TimeOfUpdate:0}}throw e}},{enabled:!!e&&l&&a})}();return v?(0,s.jsx)("div",{className:"mt-medium",children:(0,s.jsx)(y.i,{label:"Error fetching points breakdown",variant:"lg",refetch:b})}):(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mt-default",children:[(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:"LP"}),j?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"52px"})}):g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default",size:"xx-small",className:"mr-xx-small"}),(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:(0,N._)(null!==(e=null==h?void 0:h.BoostedLpPoints)&&void 0!==e?e:0)})]}):null]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-default",children:[(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:"Margin Collateral"}),j?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"52px"})}):g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default",size:"xx-small",className:"mr-xx-small"}),(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:(0,N._)(null!==(a=null==h?void 0:h.BoostedMarginPoints)&&void 0!==a?a:0)})]}):null]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-default",children:[(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:"Fee Rebate"}),j?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"52px"})}):g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default",size:"xx-small",className:"mr-xx-small"}),(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:(0,N._)(h.BoostedFeeRebatePoints)})]}):null]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-default",children:[(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:"Negative P&L"}),j?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"52px"})}):g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default",size:"xx-small",className:"mr-xx-small"}),(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:(0,N._)(h.BoostedNegativePricePnlPoints)})]}):null]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-default",children:[(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:"Early Bird"}),j?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"52px"})}):g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default",size:"xx-small",className:"mr-xx-small"}),(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:(0,N._)(h.BoostedEarlyBirdPoints)})]}):null]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-default",children:[(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:"Referral"}),j?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"52px"})}):g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default",size:"xx-small",className:"mr-xx-small"}),(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:(0,N._)(null!==(l=h.BoostedTotalReferralPoints)&&void 0!==l?l:0)})]}):null]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-default",children:[(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:"Open interest Held"}),j?(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"52px"}):g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default",size:"xx-small",className:"mr-xx-small"}),(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:(0,N._)(h.BoostedOpenInterestPoints)})]}):null]}),(0,f.xP)(null==h?void 0:h.RemediationTotalPoints)?(0,s.jsxs)("div",{className:"flex items-center justify-between mt-default",children:[(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:"Remediation Points"}),j?(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"52px"}):g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default",size:"xx-small",className:"mr-xx-small"}),(0,s.jsx)(u.a,{category:"paragraph",tag:"p",mode:"small",children:(0,N._)(null!==(m=h.RemediationTotalPoints)&&void 0!==m?m:0)})]}):null]}):null]})}var P=l(49238),B=l(72971),k=l(45603),R=l(22476),F=l(45924),z=l(83507),O=l(57578),T=l(29797);function _(){let{bgcolor:e,spotcolor:a,color:l}=(0,T.a)(),{publicKey:t}=(0,i.O)(),{data:r,isInitialLoading:d,isError:n,isSuccess:o,refetch:u}=(0,c.t)(),{data:h,isInitialLoading:p,isError:j,isSuccess:g,refetch:v}=m(),b=null!==t,N=!0===r,y=(0,f.xP)(null==h?void 0:h.grandTotalPoints),w=async()=>{n&&await u(),j&&await v()};return d||p?(0,s.jsx)(x.o,{height:"123px",width:"100%"}):n||j?(0,s.jsx)(L,{refetchPtsQueries:w}):(0,s.jsxs)("div",{style:{backgroundImage:'url("/images/points-card-background.png")',backgroundSize:"cover"},className:(0,F.Z)("box-border border transition-all overflow-hidden relative rounded-lg border-neutral-border-surface-default"),children:[(0,s.jsx)(z.S,{color1:e,color2:l,color3:a}),b?o&&!N?(0,s.jsx)(I,{}):g&&!y?(0,s.jsx)(E,{}):b&&N&&y?(0,s.jsx)(A,{points:null==h?void 0:h.grandTotalPoints}):null:(0,s.jsx)(C,{})]})}function A(e){let{points:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:(0,F.Z)("flex items-center relative justify-between w-full p-default"),style:{backgroundImage:'url("/images/points_card_header.svg")',backgroundSize:"cover"},children:(0,s.jsx)(u.a,{category:"label",mode:"default",children:"My Points"})}),(0,s.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default"}),(0,s.jsxs)("div",{className:"flex items-center justify-between w-full p-default",children:[(0,s.jsx)("div",{className:"flex w-[calc(100%-32px)]",children:(0,s.jsxs)(u.a,{category:"subheading",mode:"default","data-cy":"points-card-balance",className:"z-10 flex items-center italic font-bold pr-x-small text-decorative-reward-default",children:[(0,s.jsx)(p.J,{name:"points",prefix:"sharp-solid",color:"default"}),(0,N._)(null!=a?a:0)]})}),(0,s.jsx)(B.Y,{size:"small",className:"rounded-md"})]})]})}function E(){return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:(0,F.Z)("flex items-center relative justify-between w-full p-default"),style:{backgroundImage:'url("/images/points_card_header.svg")',backgroundSize:"cover"},children:(0,s.jsx)(u.a,{category:"label",mode:"default",children:"My Points"})}),(0,s.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default"}),(0,s.jsxs)("div",{className:"flex items-center justify-between w-full p-default",children:[(0,s.jsx)("div",{className:"flex w-[calc(100%-32px)]",children:(0,s.jsxs)(u.a,{category:"paragraph",mode:"small",className:"z-10 italic pr-x-small",children:["No fear, your total points will populate here after the next update."," "]})}),(0,s.jsx)(B.Y,{size:"small",className:"rounded-md"})]})]})}function I(){let{publicKey:e}=(0,i.O)(),{showModal:a,setModalContent:l}=(0,P.dd)();return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:(0,F.Z)("flex items-center relative justify-between w-full p-default"),style:{backgroundImage:'url("/images/points_card_header.svg")',backgroundSize:"cover"},children:[(0,s.jsx)(u.a,{category:"label",mode:"default",children:"My Points"}),(0,s.jsx)(k.z,{onClick:()=>{(0,O.g)({publicKey:e,setModalContent:l,showModal:a})},className:"z-20 w-auto",intent:"reward",compressed:!0,children:"Activate Account"})]}),(0,s.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default"}),(0,s.jsxs)("div",{className:"flex items-center justify-between w-full p-default",children:[(0,s.jsx)("div",{className:"flex w-[calc(100%-32px)]",children:(0,s.jsxs)(u.a,{category:"paragraph",mode:"small",className:"z-10 italic pr-x-small",children:["Activate your points account to claim retroactive and future points."," "]})}),e&&(0,s.jsx)(B.Y,{size:"small",className:"rounded-md"})]})]})}function L(e){let{refetchPtsQueries:a}=e;return(0,s.jsxs)(R.T,{className:"flex items-center justify-between p-default",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(u.a,{category:"label",mode:"small",children:"Points Failed to Load"}),(0,s.jsx)(u.a,{category:"paragraph",mode:"small",children:"Please re-load."})]}),(0,s.jsx)(k.z,{onClick:a,className:"w-auto",intent:"secondary",leftIconName:"arrows-rotate",children:"Re-load"})]})}function C(){let{publicKey:e}=(0,i.O)(),{showModal:a,setModalContent:l}=(0,P.dd)();return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:(0,F.Z)("flex items-center relative justify-between w-full p-default"),style:{backgroundImage:'url("/images/points_card_header.svg")',backgroundSize:"cover"},children:[(0,s.jsx)(u.a,{category:"label",mode:"default",children:"My Points"}),(0,s.jsx)(k.z,{onClick:()=>{(0,O.g)({publicKey:e,setModalContent:l,showModal:a})},className:"z-20 w-auto",intent:"primary",compressed:!0,children:"Connect Wallet"})]}),(0,s.jsx)("div",{className:"w-full border-b border-neutral-border-surface-default"}),(0,s.jsx)("div",{className:"flex items-center justify-between w-full p-default",children:(0,s.jsx)("div",{className:"flex w-[calc(100%-32px)]",children:(0,s.jsx)(u.a,{category:"paragraph",mode:"small",className:"z-10 italic pr-x-small",children:"Connect your wallet to view or activate your points account."})})})]})}function S(){var e;let{data:a,isLoading:l,isError:t,isSuccess:r}=m();return(console.log({userPointsPosition:a,isLoading:l,isError:t,isSuccess:r}),t)?null:(0,s.jsx)("div",{className:(0,F.Z)("flex transition-all items-center justify-between border rounded-lg border-neutral-border-surface-default p-default mt-default",{"opacity-40":l}),children:(0,s.jsxs)("div",{children:[(0,s.jsx)(u.a,{category:"overline",tag:"h3",children:"POINTS RANKING"}),l?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x.o,{className:"mt-x-small",height:"24px",width:"150px"})}):r&&(0,f.xP)(a.grandTotalPoints)?(0,s.jsxs)("div",{children:[(0,s.jsx)(u.a,{category:"label",tag:"span",className:"text-decorative-reward-default",children:null==a?void 0:a.rank}),(0,s.jsxs)(u.a,{category:"label",tag:"span",className:"text-neutral-paragraph-default",children:[" ","/ ",null!==(e=null==a?void 0:a.numberOfRankedUsers)&&void 0!==e?e:0]})]}):(0,s.jsx)(u.a,{category:"label",tag:"span",className:"text-decorative-reward-default",children:"n/a"})]})})}function J(){var e,a,l,t;let{data:r,isInitialLoading:d,isError:n,isSuccess:o}=m(),{publicKey:c}=(0,i.O)(),p=null==r?void 0:r.activeBoosts.find(e=>{let[a]=e;return"Referral"===a}),j=null==r?void 0:r.activeBoosts.find(e=>{let[a]=e;return"HOA"===a}),N=null==r?void 0:r.activeBoosts.find(e=>{let[a]=e;return"Prcl"===a}),y=new h.Z(null!==(e=null==N?void 0:N[1])&&void 0!==e?e:0).mul(100).toDP(0).toNumber(),P=new h.Z(null!==(a=null==p?void 0:p[1])&&void 0!==a?a:0).mul(100).toDP(0).toNumber(),B=new h.Z(null!==(l=null==j?void 0:j[1])&&void 0!==l?l:0).mul(100).toDP(0).toNumber(),k=(0,f.xP)(B),R=(0,f.xP)(P),F=(0,f.xP)(y);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_,{}),null===c||n?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S,{}),(0,f.xP)(null!==(t=Number(null==r?void 0:r.grandTotalPoints))&&void 0!==t?t:0)?(0,s.jsx)(w,{}):null,d?(0,s.jsxs)("div",{className:"flex flex-col gap-default my-default",children:[(0,s.jsx)(x.o,{height:"150px",width:"100%"}),(0,s.jsx)(x.o,{height:"150px",width:"100%"})]}):R||k?(0,s.jsxs)("div",{className:"flex flex-col border-t mt-default border-neutral-fill-surface-default",children:[(0,s.jsx)(u.a,{category:"label",mode:"default",className:"my-default",children:"Points Boosts"}),o&&F?(0,s.jsx)(v,{boost:y}):null,o&&R?(0,s.jsx)(b,{referredBoost:P}):null,o&&k?(0,s.jsx)(g,{boost:B}):null]}):(0,s.jsxs)("div",{className:"flex flex-col border-t mt-default border-neutral-fill-surface-default ".concat({"opacity-40":null!==c&&void 0!==r}),children:[(0,s.jsx)(u.a,{category:"label",mode:"default",className:"mt-default",children:"Points Boosts"}),(0,s.jsx)(u.a,{category:"paragraph",mode:"small",className:"italic mb-default",children:"You have no active points boosts. All active boosts will show up here."})]})]})]})}}}]);